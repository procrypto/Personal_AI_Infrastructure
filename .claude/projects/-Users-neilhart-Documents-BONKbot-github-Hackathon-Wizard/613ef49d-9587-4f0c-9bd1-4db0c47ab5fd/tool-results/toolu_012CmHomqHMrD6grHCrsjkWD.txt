     1→# Token Analysis Autopilot
     2→
     3→Configurable rule-based analysis system for Solana tokens that triggers automated paper trades via customizable strategies.
     4→
     5→## Features
     6→
     7→- **Rule Engine**: Configurable rules that analyze token metrics and emit buy/sell signals
     8→- **Template Strategies**: Pre-built rule combinations for common trading patterns
     9→- **Auto-Sources**: Automated screening via trending tokens and whale activity
    10→- **Paper Trading**: Simulated trading with full P&L tracking
    11→- **Live Portfolio**: Real-time unrealized P&L with color-coded output
    12→- **Opposite Signal Handling**: Auto-close positions when opposite signal fires
    13→- **CLI Interface**: Simple commands for configuration and monitoring
    14→
    15→## Installation
    16→
    17→```bash
    18→npm install
    19→```
    20→
    21→## Quick Start
    22→
    23→```bash
    24→# 1. Add a token to watchlist
    25→npm run cli watch DezXAZ8z7PnrnRJjz3wXBoRgixCa6xjnB7YaB1pPB263 BONK
    26→
    27→# 2. Add a trading strategy
    28→npm run cli use momentum-buy
    29→
    30→# 3. Start analysis loop
    31→npm run cli run
    32→```
    33→
    34→## CLI Commands
    35→
    36→### Watchlist Management
    37→```bash
    38→watch <mint> [symbol]   # Add token to watchlist
    39→unwatch <mint>          # Remove token from watchlist
    40→list                    # List all watched tokens
    41→```
    42→
    43→### Auto-Sources
    44→```bash
    45→sources                 # Show auto-source status
    46→sources on|off          # Enable/disable all auto-sources
    47→sources trending on|off # Toggle trending source
    48→sources whales on|off   # Toggle whale moves source
    49→```
    50→
    51→### Rule Management
    52→```bash
    53→templates               # List available strategy templates
    54→use <template>          # Activate a template
    55→remove <rule-id>        # Remove a rule set
    56→rules                   # List active rules
    57→```
    58→
    59→### Configuration
    60→```bash
    61→config                  # Show current config
    62→mode <paper|live>       # Set trading mode
    63→size <sol>              # Set default position size
    64→```
    65→
    66→### Trading
    67→```bash
    68→analyze <mint>          # Analyze single token (triggers trade if signal)
    69→run                     # Start continuous analysis loop
    70→```
    71→
    72→### Portfolio
    73→```bash
    74→status                  # Live portfolio overview with P&L
    75→trades                  # List all paper trades
    76→stats                   # Show trading statistics
    77→close <mint>            # Close open position
    78→reset                   # Clear all trading data
    79→```
    80→
    81→## Strategy Templates
    82→
    83→View available templates with compact rule notation:
    84→
    85→```bash
    86→npm run cli templates
    87→```
    88→
    89→Output:
    90→```
    91→momentum-buy:   price +1%/5m & price +2%/1h & vol 1.5x/5m & ratio 1.5:1/5m
    92→momentum-sell:  price -2%/5m & ratio 1.5:1/5m
    93→volume-alert:   vol 2x/5m | vol 3x/1h
    94→retail-interest: 50+30 traders/5m & ratio 1.2:1/5m
    95→```
    96→
    97→### Available Templates
    98→
    99→| Template | Description | Mode |
   100→|----------|-------------|------|
   101→| `momentum-buy` | Rising price + volume spike + buy pressure | ALL rules must match |
   102→| `momentum-sell` | Falling price + sell pressure | ALL rules must match |
   103→| `volume-alert` | Significant volume spikes | ANY rule can trigger |
   104→| `retail-interest` | High trader count + buyer majority | ALL rules must match |
   105→
   106→## Rule Types
   107→
   108→### Price Change
   109→Triggers on percentage price movement over timeframe.
   110→```
   111→price +1%/5m    # Up 1% in 5 minutes
   112→price -2%/1h    # Down 2% in 1 hour
   113→price +-5%/24h  # Up or down 5% in 24 hours
   114→```
   115→
   116→### Volume Spike
   117→Triggers when volume exceeds average by multiplier.
   118→```
   119→vol 2x/5m       # 2x average volume in 5 minutes
   120→vol 3x/1h       # 3x average volume in 1 hour
   121→```
   122→
   123→### Buy/Sell Ratio
   124→Triggers when buy volume exceeds sell volume (or vice versa).
   125→```
   126→ratio 1.5:1/5m  # 1.5x more buy volume than sell in 5m
   127→```
   128→
   129→### Trader Count
   130→Triggers on unique trader activity.
   131→```
   132→50+30 traders/5m  # 50 total traders, 30+ buyers in 5m
   133→```
   134→
   135→### Breakout
   136→Triggers when price breaks out of recent range.
   137→```
   138→breakout 5%/20c   # 5% breakout over 20 candles
   139→```
   140→
   141→### MA Crossover
   142→Triggers on moving average crossover.
   143→```
   144→ma 10x50          # 10-period crosses 50-period
   145→```
   146→
   147→## Run Loop Output
   148→
   149→The `run` command shows real-time status with color-coded P&L and source indicators:
   150→
   151→```
   152→Starting analysis loop... (Ctrl+C to stop)
   153→  Watchlist: 1 | Trending: 20 | Whales: 15
   154→  Open trades: 1 | Rules: 1 sets | Mode: paper
   155→  Scan interval: 30000ms | Source refresh: 900s
   156→
   157→[06:33:37] #1  |  Scan: [W]BONK:- [T]810:- [$]neet:-  |  Trades: [T]MUR (0.10) +5.2%
   158→[06:34:07] #2  |  Scan: [W]BONK:BUY(85%) [T]810:- [$]neet:SELL(72%)  |  Trades: [T]MUR (0.10) +5.8%
   159→```
   160→
   161→### Source Indicators
   162→- `[W]` = Manual watchlist
   163→- `[T]` = Trending (from discovery/trending endpoint)
   164→- `[$]` = Whale moves (from discovery/whale_moves endpoint)
   165→
   166→### Output Sections
   167→- **Scan**: Tokens being analyzed with signals (- = hold, BUY/SELL = signal with confidence)
   168→- **Trades**: Open positions with size and unrealized P&L (green = profit, red = loss)
   169→
   170→## Auto-Sources
   171→
   172→Auto-sources provide automated token screening by pulling from BONKbot's discovery endpoints:
   173→
   174→- **Trending**: Tokens with high recent volume/activity from `/discovery/trending`
   175→- **Whale Moves**: Tokens being actively traded by whale wallets from `/discovery/whale_moves`
   176→
   177→### How It Works
   178→
   179→1. On startup, auto-sources are fetched immediately
   180→2. Lists refresh every 15 minutes (configurable)
   181→3. Tokens from auto-sources are analyzed alongside your manual watchlist
   182→4. Same rule sets apply to all sources (TODO: per-source strategies)
   183→5. Source is tracked and displayed in output for transparency
   184→
   185→### Configuration
   186→
   187→```bash
   188→# Check current status
   189→npm run cli sources
   190→
   191→# Enable/disable all auto-sources
   192→npm run cli sources on
   193→npm run cli sources off
   194→
   195→# Toggle individual sources
   196→npm run cli sources trending off
   197→npm run cli sources whales on
   198→```
   199→
   200→### Notes
   201→
   202→- Auto-sources have unlimited position limits (TODO: add per-source limits)
   203→- No spam filtering currently applied (TODO: add when expanding to broader sources)
   204→- Manual watchlist tokens always take priority over auto-source duplicates
   205→
   206→## Opposite Signal Handling
   207→
   208→Configure behavior when opposite signal fires on an open position:
   209→
   210→```typescript
   211→onOppositeSignal: 'close' | 'flip' | 'ignore'
   212→```
   213→
   214→- `close`: Close position, don't open new (default)
   215→- `flip`: Close position, open opposite direction
   216→- `ignore`: Keep existing position, ignore signal
   217→
   218→## Configuration
   219→
   220→Config stored in `.autopilot/config.json`:
   221→
   222→```typescript
   223→{
   224→  watchlist: [],           // Manual tokens to monitor
   225→  ruleSets: [],            // Active rule sets
   226→  autoSources: {
   227→    enabled: true,         // Master toggle for auto-sources
   228→    trending: true,        // Enable trending source
   229→    whales: true,          // Enable whale moves source
   230→    refreshIntervalMs: 900000,  // 15 minutes
   231→    trendingLimit: 20,     // Max tokens from trending
   232→    whalesLimit: 20        // Max tokens from whale_moves
   233→  },
   234→  trigger: {
   235→    enabled: true,
   236→    mode: 'paper',         // paper | live
   237→    defaultPositionSizeSol: 0.1,
   238→    maxPositionSizeSol: 1,
   239→    cooldownMs: 60000,     // 1 minute between triggers
   240→    onOppositeSignal: 'close'
   241→  },
   242→  pollIntervalMs: 30000    // 30 second scan interval
   243→}
   244→```
   245→
   246→## Data Storage
   247→
   248→All data stored in `.autopilot/`:
   249→- `config.json` - User configuration
   250→- `trades.json` - Paper trade history
   251→- `events.json` - Trigger event log
   252→
   253→## API Integration
   254→
   255→Uses local BONKbot web-terminal API (`localhost:8787`) for:
   256→- Token market data (price, volume, traders)
   257→- OHLCV candle data
   258→- Trade history
   259→- Discovery endpoints (trending, whale_moves)
   260→
   261→## Status Command
   262→
   263→Get full portfolio overview:
   264→
   265→```bash
   266→npm run cli status
   267→```
   268→
   269→Output:
   270→```
   271→=== PORTFOLIO STATUS ===
   272→
   273→Open Positions:
   274→  BUY BONK  +12.34%  (+0.0123 SOL)
   275→    Entry: 0.00000123 -> Now: 0.00000138 SOL
   276→
   277→  Exposure: 0.1000 SOL
   278→  Unrealized: +0.0123 SOL ($1.23)
   279→
   280→Realized P&L:
   281→  5 trades | 3W/2L | 60% win
   282→  Total: +0.0456 SOL ($4.56)
   283→
   284→Config:
   285→  Watching: 2 tokens | Rules: 1 sets
   286→  Mode: paper
   287→```
   288→
   289→## Development
   290→
   291→```bash
   292→npm run dev        # Watch mode
   293→npm run build      # TypeScript compile
   294→npm run test       # Run test suite
   295→```
   296→
   297→## Roadmap
   298→
   299→- [ ] Magic SL: Williams fractal trailing stop
   300→- [ ] Magic S/R: Candlestick rotation support/resistance
   301→- [ ] Magic TP: Auto-sell at rotation resistance
   302→- [ ] Magic Buy: Entry at support levels
   303→- [ ] Live LOIS integration
   304→
   305→## License
   306→
   307→Private - BONKbot Hackathon 2025
   308→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
