838-              pnlSol: pnl.pnlSol,
839-              entryTime: trade.timestamp,
840-            });
841-          }
842-        }
843:        wsServer.broadcastPositions(positionData);
844-
845-        // Broadcast signals for magic exits
846-        for (const closed of magicExitResults) {
847-          wsServer.broadcastSignal({
848-            timestamp: Date.now(),
849-            mint: closed.mint,
850-            symbol: closed.symbol,
851-            signalType: 'magic_exit',
852-            action: 'close',
853-            reason: closed.reason || 'Magic exit triggered',
854-            pnlPercent: closed.pnlPercent,
855-          });
856-        }
857-
858-        // Broadcast signals for dump exits