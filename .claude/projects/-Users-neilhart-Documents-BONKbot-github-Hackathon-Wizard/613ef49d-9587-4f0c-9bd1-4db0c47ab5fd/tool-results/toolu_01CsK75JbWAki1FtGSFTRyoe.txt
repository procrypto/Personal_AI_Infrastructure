╔══════════════════════════════════════════════════════════════╗
║  COMPREHENSIVE TRADING FUNCTIONS TEST SUITE                  ║
╚══════════════════════════════════════════════════════════════╝

=== WILLIAMS FRACTAL TSL ===

  ✓ detectFractalLows finds fractal with 3/3 settings
  ✓ filterValidFractals removes invalidated fractals
  ✓ calculateStopPrice uses second most recent valid fractal
  ✓ calculateStopPrice only moves up, never down
  ✓ check returns not triggered when above stop
  ✓ check returns triggered when below stop
  ✓ clearState removes mint state

=== MAGIC EXITS ===

  ✓ checkExit returns no exit when price is mid-range
  ✓ TP triggers when approaching resistance in profit
  ✓ SL triggers when below support
  ✓ config can be updated at runtime

=== MAGIC BUY ===

  ✓ checkEntry blocks when position already exists
  ✓ checkEntry blocks during cooldown period
  ✓ pullback entry detects price near support in uptrend
  ✓ SFP entry detects false breakout below support
  ✓ config can be updated at runtime

=== MARKET FILTER ===

  ✓ starts in NORMAL state
  ✓ returns disabled result when not enabled
  ✓ transitions to CAUTION at -3%
  ✓ deriveSolPrice calculates from token prices
  ✓ check uses derived SOL price when direct unavailable
  ✓ reset clears state and history

=== ROTATIONS ===

  ✓ calculateRotations returns null with insufficient data
  ✓ calculateRotations detects upward rotation
  ✓ calculateRotations detects downward rotation
  ✓ estimateRotationFromMarketData creates levels from price changes

=== INTEGRATION TESTS ===

  ✓ Full trade lifecycle: open -> monitor -> close
  ✓ Stats calculation works correctly

══════════════════════════════════════════════════════════════

  RESULTS: 28 passed, 0 failed

  All tests passed!
══════════════════════════════════════════════════════════════
Shell cwd was reset to /Users/neilhart/Documents/BONKbot/github/Hackathon Wizard