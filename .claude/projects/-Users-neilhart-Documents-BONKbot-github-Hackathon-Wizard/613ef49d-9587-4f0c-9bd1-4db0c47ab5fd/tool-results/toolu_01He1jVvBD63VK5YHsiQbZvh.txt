   280→### Configuration
   281→
   282→```typescript
   283→{
   284→  tpEnabled: true,
   285→  tpTriggerPercent: 0.5,  // Within 0.5% of resistance to trigger
   286→
   287→  slEnabled: true,
   288→  slTriggerPercent: 0.5,  // 0.5% below support to trigger
   289→
   290→  tslEnabled: false,      // Williams fractal trailing (TODO)
   291→}
   292→```
   293→
   294→### Run Loop Integration
   295→
   296→Magic exits are checked on every scan cycle:
   297→
   298→```
   299→[time] #scan (count)  |  Magic: SYMBOL:+5.2%  |  New: ...  |  Open: ...
   300→```
   301→
   302→- **Magic: SYMBOL:+X%** shows trades closed by magic exits with P&L
   303→
   304→---
   305→
   306→## Williams Fractal Trailing Stop (TODO)
   307→
   308→Planned feature: Trail stop loss to Williams fractal swing lows.
   309→
   310→### Algorithm
   311→
   312→```
   313→Williams Fractal Detection:
   314→  High Fractal: high[n] >= highest(high, leftBars + rightBars + 1)
   315→  Low Fractal:  low[n] <= lowest(low, leftBars + rightBars + 1)
   316→
   317→Trailing Logic:
   318→  - longTrail trails UP from confirmed low fractals
   319→  - Exit when price closes below longTrail
   320→```
   321→
   322→### Planned Settings
   323→
   324→```typescript
   325→{
   326→  timeframe: '1m',     // Candle resolution
   327→  leftBars: 3,         // Bars back to confirm fractal
   328→  rightBars: 3,        // Bars forward to confirm fractal
   329→  // 3/3 = 7-bar window for fractal confirmation
   330→}
   331→```
   332→
   333→---
   334→
   335→## Run Loop Output
   336→
   337→The `run` command shows real-time status with color-coded P&L and source indicators:
   338→
   339→```
   340→Starting analysis loop... (Ctrl+C to stop)
   341→  Watchlist: 1 | Trending: 20 | Whales: 15
   342→  Open trades: 1 | Rules: 1 sets | Mode: paper
   343→  Scan interval: 30000ms | Source refresh: 900s
   344→
   345→[06:33:37] #1  |  Scan: [W]BONK:- [T]810:- [$]neet:-  |  Trades: [T]MUR (0.10) +5.2%
   346→[06:34:07] #2  |  Scan: [W]BONK:BUY(85%) [T]810:- [$]neet:SELL(72%)  |  Trades: [T]MUR (0.10) +5.8%
   347→```
   348→
   349→### Source Indicators
   350→- `[W]` = Manual watchlist
   351→- `[T]` = Trending (from discovery/trending endpoint)
   352→- `[$]` = Whale moves (from discovery/whale_moves endpoint)
   353→
   354→### Output Sections
   355→- **Scan**: Tokens being analyzed with signals (- = hold, BUY/SELL = signal with confidence)
   356→- **Trades**: Open positions with size and unrealized P&L (green = profit, red = loss)
   357→
   358→## Auto-Sources
   359→
   360→Auto-sources provide automated token screening by pulling from BONKbot's discovery endpoints:
   361→
   362→- **Trending**: Tokens with high recent volume/activity from `/discovery/trending`
   363→- **Whale Moves**: Tokens being actively traded by whale wallets from `/discovery/whale_moves`
   364→
   365→### How It Works
   366→
   367→1. On startup, auto-sources are fetched immediately
   368→2. Lists refresh every 15 minutes (configurable)
   369→3. Tokens from auto-sources are analyzed alongside your manual watchlist
   370→4. Same rule sets apply to all sources (TODO: per-source strategies)
   371→5. Source is tracked and displayed in output for transparency
   372→
   373→### Configuration
   374→
   375→```bash
   376→# Check current status
   377→npm run cli sources
   378→
   379→# Enable/disable all auto-sources

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
