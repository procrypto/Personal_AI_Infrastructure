     1→use std::str::FromStr as _;
     2→
     3→use chrono::{DateTime, Utc};
     4→use common::{pubkey_serde::pubkey_base58, submitter_type::SubmitterRequest};
     5→use serde::{Deserialize, Serialize};
     6→use serde_with::{DisplayFromStr, TimestampMicroSeconds, serde_as};
     7→use solana_sdk::pubkey::Pubkey;
     8→use thiserror::Error;
     9→
    10→use crate::{
    11→    database::LimitOrderRow,
    12→    math::trailing_market_cap::calculate_trigger_amount,
    13→    types::{
    14→        mev_type::MevType,
    15→        order_config::{
    16→            MarketContext, OrderConfig, OrderConfigConversionError,
    17→            UpdateTrailingMarketCapTriggerError,
    18→        },
    19→        trigger::TrailingMarketCapTrigger,
    20→    },
    21→};
    22→
    23→#[serde_as]
    24→#[derive(Clone, Debug, Deserialize, PartialEq, Serialize)]
    25→#[serde(rename_all = "camelCase")]
    26→pub struct Intent {
    27→    /// Unique identifier for an intent.
    28→    #[serde_as(as = "DisplayFromStr")]
    29→    pub id: i64,
    30→
    31→    /// The user ID that owns this intent.
    32→    #[serde_as(as = "DisplayFromStr")]
    33→    pub user_id: i64,
    34→
    35→    /// The Telemetry ID of the user that owns this intent.
    36→    #[serde_as(as = "DisplayFromStr")]
    37→    pub telemetry_id: i64,
    38→
    39→    /// The mint that will be sent in the swap.
    40→    #[serde(with = "pubkey_base58")]
    41→    pub from_token_mint: Pubkey,
    42→
    43→    /// The mint that will be received in the swap.
    44→    #[serde(with = "pubkey_base58")]
    45→    pub to_token_mint: Pubkey,
    46→
    47→    /// The number of token decimals for the mint that will be sent in the swap.
    48→    pub from_token_decimals: u8,
    49→
    50→    /// The number of token decimals for the mint that will be received in the swap.
    51→    pub to_token_decimals: u8,
    52→
    53→    /// In atomic units.
    54→    #[serde_as(as = "DisplayFromStr")]
    55→    pub amount_in: u64,
    56→
    57→    /// Allowable price impact in basis points.
    58→    /// Price impact is the percentage difference between
    59→    /// the spot price and the effective price of the trade
    60→    /// using the quoted amount out.
    61→    pub price_impact_bps: u32,
    62→
    63→    /// Allowable slippage in basis points.
    64→    pub slippage_bps: u32,
    65→
    66→    /// In lamports.
    67→    #[serde_as(as = "DisplayFromStr")]
    68→    pub priority_fee: u64,
    69→
    70→    /// This becomes serialized / deserialized from UNIX micros to
    71→    /// simplify intent formation from non-Rust.
    72→    #[serde_as(as = "TimestampMicroSeconds<i64>")]
    73→    pub created_at: DateTime<Utc>,
    74→
    75→    /// This becomes serialized / deserialized from UNIX micros to
    76→    /// simplify intent formation from non-Rust.
    77→    #[serde_as(as = "TimestampMicroSeconds<i64>")]
    78→    pub updated_at: DateTime<Utc>,
    79→
    80→    /// Encapsulates the trigger and order type.
    81→    pub order_config: OrderConfig,
    82→
    83→    /// The submission methods to use.
    84→    pub submitter_requests: Vec<SubmitterRequest>,
    85→
    86→    /// The key generated by the signer after registering the transaction.
    87→    pub signer_user_message: String,
    88→
    89→    /// The wallet that will sign the transaction, if any.
    90→    #[serde(default)]
    91→    pub signer_wallet: Option<SignerWallet>,
    92→
    93→    /// The limit order version.
    94→    pub version: i32,
    95→}
    96→
    97→#[serde_as]
    98→#[derive(Clone, Debug, Deserialize, PartialEq, Serialize)]
    99→#[serde(rename_all = "camelCase")]
   100→pub struct SignerWallet {

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
