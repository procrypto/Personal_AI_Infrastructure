     1â†’/**
     2â†’ * Test Script - Debug mode to see what data we're getting
     3â†’ */
     4â†’
     5â†’import { localApi } from './api/client.js';
     6â†’import { RuleEngine } from './rules/engine.js';
     7â†’import { createPriceChangeRule } from './rules/price-change.js';
     8â†’import { createVolumeSpikeRule } from './rules/volume-spike.js';
     9â†’
    10â†’async function test() {
    11â†’  console.log('â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—');
    12â†’  console.log('â•‘  TOKEN ANALYSIS AUTOPILOT - DEBUG TEST                       â•‘');
    13â†’  console.log('â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n');
    14â†’
    15â†’  const mint = process.argv[2] || 'DezXAZ8z7PnrnRJjz3wXBoRgixCa6xjnB7YaB1pPB263'; // BONK
    16â†’
    17â†’  console.log(`Testing with token: ${mint}\n`);
    18â†’
    19â†’  // Fetch data directly to see what we're working with
    20â†’  console.log('1. Fetching market data...');
    21â†’  try {
    22â†’    const marketData = await localApi.getMarketData(mint);
    23â†’    console.log(`   Symbol: ${marketData.symbol}`);
    24â†’    console.log(`   Price (SOL): ${marketData.price_sol}`);
    25â†’    console.log(`   Price (USD): $${marketData.price_usd?.toFixed(6) ?? 'N/A'}`);
    26â†’    console.log(`   Market Cap: $${(marketData.market_cap_usd ?? 0).toLocaleString()}`);
    27â†’    console.log(`   Holders: ${marketData.holders?.toLocaleString() ?? 'N/A'}`);
    28â†’
    29â†’    // Price change data
    30â†’    console.log('\n   Price Change Data:');
    31â†’    console.log(`   - earliest_price_sol_5m: ${(marketData as any).earliest_price_sol_5m ?? 'N/A'}`);
    32â†’    console.log(`   - earliest_price_sol_1h: ${(marketData as any).earliest_price_sol_1h ?? 'N/A'}`);
    33â†’    console.log(`   - earliest_price_sol_6h: ${(marketData as any).earliest_price_sol_6h ?? 'N/A'}`);
    34â†’    console.log(`   - earliest_price_sol_24h: ${(marketData as any).earliest_price_sol_24h ?? 'N/A'}`);
    35â†’
    36â†’    // Calculate actual price changes
    37â†’    if ((marketData as any).earliest_price_sol_5m) {
    38â†’      const pct5m = ((marketData.price_sol - (marketData as any).earliest_price_sol_5m) / (marketData as any).earliest_price_sol_5m) * 100;
    39â†’      console.log(`   - 5m change: ${pct5m.toFixed(2)}%`);
    40â†’    }
    41â†’    if ((marketData as any).earliest_price_sol_1h) {
    42â†’      const pct1h = ((marketData.price_sol - (marketData as any).earliest_price_sol_1h) / (marketData as any).earliest_price_sol_1h) * 100;
    43â†’      console.log(`   - 1h change: ${pct1h.toFixed(2)}%`);
    44â†’    }
    45â†’
    46â†’    // Volume data
    47â†’    console.log('\n   Volume Data (SOL):');
    48â†’    console.log(`   - volume_5m: ${(marketData as any).volume_sol_5m ?? 'N/A'}`);
    49â†’    console.log(`   - volume_1h: ${(marketData as any).volume_sol_1h ?? 'N/A'}`);
    50â†’    console.log(`   - volume_6h: ${(marketData as any).volume_sol_6h ?? 'N/A'}`);
    51â†’    console.log(`   - volume_24h: ${(marketData as any).volume_sol_24h ?? 'N/A'}`);
    52â†’
    53â†’    // Buy/sell data
    54â†’    console.log('\n   Buy/Sell Activity:');
    55â†’    console.log(`   - buys_5m: ${(marketData as any).buys_5m ?? 'N/A'} | sells_5m: ${(marketData as any).sells_5m ?? 'N/A'}`);
    56â†’    console.log(`   - buys_1h: ${(marketData as any).buys_1h ?? 'N/A'} | sells_1h: ${(marketData as any).sells_1h ?? 'N/A'}`);
    57â†’  } catch (error) {
    58â†’    console.error('   âœ— Failed to fetch market data:', error);
    59â†’  }
    60â†’
    61â†’  // Now run analysis with lower thresholds
    62â†’  console.log('\n\n2. Running analysis with LOWER thresholds...');
    63â†’
    64â†’  const engine = new RuleEngine({ api: localApi });
    65â†’
    66â†’  // Very sensitive rules for testing
    67â†’  engine.addRule(createPriceChangeRule('price-any-5m', 'Any Price Move (5m)', {
    68â†’    timeframe: '5m',
    69â†’    threshold: 0.1, // 0.1% - very sensitive!
    70â†’    direction: 'both',
    71â†’    type: 'both',
    72â†’  }));
    73â†’
    74â†’  engine.addRule(createPriceChangeRule('price-any-1h', 'Any Price Move (1h)', {
    75â†’    timeframe: '1h',
    76â†’    threshold: 0.5, // 0.5%
    77â†’    direction: 'both',
    78â†’    type: 'both',
    79â†’  }));
    80â†’
    81â†’  engine.addRule(createVolumeSpikeRule('volume-any-5m', 'Any Volume (5m)', {
    82â†’    timeframe: '5m',
    83â†’    multiplier: 0.5, // Below average is fine for testing
    84â†’    type: 'both',
    85â†’  }));
    86â†’
    87â†’  const signals = await engine.analyzeToken(mint);
    88â†’
    89â†’  if (signals.length === 0) {
    90â†’    console.log('   Still no signals (data might be missing price history fields)');
    91â†’  } else {
    92â†’    console.log(`   ${signals.length} signal(s):\n`);
    93â†’    for (const signal of signals) {
    94â†’      const emoji = signal.type === 'buy' ? 'ğŸŸ¢' : signal.type === 'sell' ? 'ğŸ”´' : 'âšª';
    95â†’      console.log(`   ${emoji} ${signal.ruleName}`);
    96â†’      console.log(`      ${signal.reason}`);
    97â†’      console.log(`      Data: ${JSON.stringify(signal.data, null, 2).split('\n').join('\n      ')}`);
    98â†’      console.log('');
    99â†’    }
   100â†’  }
   101â†’
   102â†’  console.log('\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
   103â†’  console.log('Test complete!');
   104â†’  console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n');
   105â†’}
   106â†’
   107â†’test().catch(console.error);
   108â†’

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
