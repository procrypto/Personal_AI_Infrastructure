apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:8:import type { PnlQueryResult } from "@/api/user/types";
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:18:  pnlPct: number;
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:19:  pnl: number;
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:40:  positions: PnlQueryResult[];
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:94:  if (Math.abs(bubble.pnlPct) < 1) return "rgba(128, 128, 128, 0.5)";
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:95:  return bubble.pnlPct > 0
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:102:  if (Math.abs(bubble.pnlPct) < 1) return "transparent";
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:103:  return bubble.pnlPct > 0
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:184:        const pnlPct = parseFloat(pos.current_total_profit_usd_pct || "0") || 0;
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:185:        const pnl = parseFloat(pos.current_total_profit_usd || "0") || 0;
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:206:          pnlPct: isFinite(pnlPct) ? pnlPct : 0,
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:207:          pnl: isFinite(pnl) ? pnl : 0,
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:209:          isProfit: pnl >= 0,
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:233:      const othersPnl = othersPositions.reduce(
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:242:      const othersPnlPct =
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:243:        othersInvested > 0 ? (othersPnl / othersInvested) * 100 : 0;
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:256:        pnlPct: isFinite(othersPnlPct) ? othersPnlPct : 0,
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:257:        pnl: isFinite(othersPnl) ? othersPnl : 0,
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:259:        isProfit: othersPnl >= 0,
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:282:        pnlPct: 0, // No PnL for native SOL
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:283:        pnl: 0,
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:783:                                      Math.abs(bubble.pnlPct) < 1
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:790:                                    {bubble.pnlPct > 0 ? "+" : ""}
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:791:                                    {isFinite(bubble.pnlPct)
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:792:                                      ? bubble.pnlPct.toFixed(1)
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:864:                                      Math.abs(bubble.pnlPct) < 1
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:875:                                    {bubble.pnlPct > 0 ? "+" : ""}
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:876:                                    {isFinite(bubble.pnlPct)
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-bubble.tsx:877:                                      ? bubble.pnlPct.toFixed(1)
apps/web-terminal/src/ui/dashboard/widgets/mini-trade/mini-chart-card.tsx:20:import { usePnlData } from "@/api/pnl/usePnlData";
apps/web-terminal/src/ui/dashboard/widgets/mini-trade/mini-chart-card.tsx:21:import { formatPnlDataToActivePosition } from "@/api/pnl/utils";
apps/web-terminal/src/ui/dashboard/widgets/mini-trade/mini-chart-card.tsx:22:import { useHydratePnlData } from "@/api/pnl/useHydratePnlData";
apps/web-terminal/src/ui/dashboard/widgets/mini-trade/mini-chart-card.tsx:118:  // Hydrate market data and PnL data for chart marks and position display
apps/web-terminal/src/ui/dashboard/widgets/mini-trade/mini-chart-card.tsx:120:  useHydratePnlData(mint);
apps/web-terminal/src/ui/dashboard/widgets/mini-trade/mini-chart-card.tsx:123:  const pnlData = usePnlData(mint);
apps/web-terminal/src/ui/dashboard/widgets/mini-trade/mini-chart-card.tsx:125:    return pnlData ? formatPnlDataToActivePosition(pnlData) : undefined;
apps/web-terminal/src/ui/dashboard/widgets/mini-trade/mini-chart-card.tsx:126:  }, [pnlData]);
apps/web-terminal/src/ui/dashboard/widgets/mini-trade/mini-chart-card.tsx:363:                  <span className="text-text-tertiary font-normal">{t`PnL`}</span>
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget.tsx:171:  const totalPnl = useMemo(() => {
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget.tsx:179:  const pnlPercent = useMemo(() => {
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget.tsx:180:    if (!isFinite(totalValueUsd) || totalValueUsd <= 0 || !isFinite(totalPnl))
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget.tsx:182:    const invested = totalValueUsd - totalPnl;
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget.tsx:184:    const pct = (totalPnl / invested) * 100;
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget.tsx:186:  }, [totalValueUsd, totalPnl]);
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget.tsx:222:        {/* PnL badge */}
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget.tsx:223:        {totalPnl !== 0 && isFinite(pnlPercent) && (
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget.tsx:227:              totalPnl > 0
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget.tsx:232:            {totalPnl > 0 ? (
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget.tsx:237:            {totalPnl > 0 ? "+" : ""}
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget.tsx:238:            {pnlPercent.toFixed(1)}%
apps/web-terminal/src/ui/dashboard/widgets/autopilot-widget.tsx:30:  type AutopilotPositionWithPnL,
apps/web-terminal/src/ui/dashboard/widgets/autopilot-widget.tsx:135:const PositionCard = ({ position }: { position: AutopilotPositionWithPnL }) => {
apps/web-terminal/src/ui/dashboard/widgets/autopilot-widget.tsx:136:  const isProfit = (position.pnlPercent ?? 0) >= 0;
apps/web-terminal/src/ui/dashboard/widgets/autopilot-widget.tsx:138:  const hasMarketData = position.pnlPercent !== null;
apps/web-terminal/src/ui/dashboard/widgets/autopilot-widget.tsx:183:              {position.pnlPercent!.toFixed(2)}%
apps/web-terminal/src/ui/dashboard/widgets/autopilot-widget.tsx:230:      {signal.pnlPercent !== undefined && (
apps/web-terminal/src/ui/dashboard/widgets/autopilot-widget.tsx:234:            signal.pnlPercent >= 0 ? "text-text-success" : "text-text-error"
apps/web-terminal/src/ui/dashboard/widgets/autopilot-widget.tsx:237:          {signal.pnlPercent >= 0 ? "+" : ""}
apps/web-terminal/src/ui/dashboard/widgets/autopilot-widget.tsx:238:          {signal.pnlPercent.toFixed(1)}%
apps/web-terminal/src/ui/dashboard/widgets/autopilot-widget.tsx:582:  const isProfit = stats.totalPnlSol >= 0;
apps/web-terminal/src/ui/dashboard/widgets/autopilot-widget.tsx:617:          {stats.totalPnlSol.toFixed(2)}
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-table.tsx:8:import type { PnlQueryResult } from "@/api/user/types";
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-table.tsx:15:type ProcessedPosition = PnlQueryResult & {
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-table.tsx:25:  positions: PnlQueryResult[];
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-table.tsx:49:        mintRow: PnlQueryResult | null;
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-table.tsx:50:        singleWallets: PnlQueryResult[];
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-table.tsx:51:        bundles: Map<string, PnlQueryResult>;
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-table.tsx:249:          id: "pnl",
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-table.tsx:250:          header: "PNL",
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-table.tsx:253:            const pnl = parseFloat(
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-table.tsx:258:            const pnlPct = parseFloat(
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-table.tsx:267:                  value={pnl}
apps/web-terminal/src/ui/dashboard/widgets/portfolio-widget-table.tsx:274:                  value={pnlPct.toFixed(1)}
apps/web-terminal/src/ui/dashboard/widgets/xray-bubble-widget.tsx:177:  const tooltipHeight = 380; // Account for PnL data height offset (320 + 60)
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:32:  getPnlSign,
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:33:  formatPnl,
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:34:  getPnlColorClass,
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:110:  pnl?: number;
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:261:      {event.pnl !== undefined && (
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:265:            event.pnl >= 0 ? "text-[#B4E559]" : "text-[#DC575B]"
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:268:          {event.pnl >= 0 ? "+" : ""}
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:269:          {event.pnl.toFixed(2)}
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:273:              event.pnl >= 0 ? "text-[#B4E559]" : "text-[#DC575B]"
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:322:          pnl:
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:324:            (data.data?.pnlChange as number) ||
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:325:            (data.data?.realizedPnL as number),
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:480:    return [...players].sort((a, b) => b.pnl - a.pnl).slice(0, 3);
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:516:                {getPnlSign(player.pnl)}
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:517:                {formatPnl(player.pnl)}
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:711:      return [...match.players].sort((a, b) => b.pnl - a.pnl);
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:947:                        {getPnlSign(king.pnl)}
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:948:                        {formatPnl(king.pnl)}
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:990:                      const pnlSize =
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1040:                                pnlSize
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1043:                              {getPnlSign(player.pnl)}
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1044:                              {formatPnl(player.pnl)}
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1067:                              getPnlColorClass(player.pnl)
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1070:                            {getPnlSign(player.pnl)}
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1071:                            {formatPnl(player.pnl)}
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1115:                                  {getPnlSign(player.pnl)}
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1116:                                  {formatPnl(player.pnl)}
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1158:// Target PnL Match Card - For non-KotH modes
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1171:      return [...match.players].sort((a, b) => b.pnl - a.pnl);
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1361:                        const maxPnl = Math.max(
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1362:                          ...sortedPlayers.map(p => Math.abs(p.pnl)),
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1366:                          player.pnl === 0
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1370:                                (Math.abs(player.pnl) / maxPnl) * 100
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1403:                                  {getPnlSign(player.pnl)}
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1404:                                  {formatPnl(player.pnl)}
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1460:                              {getPnlSign(leader.pnl)}
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1461:                              {formatPnl(leader.pnl)}
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1470:                                width: `${Math.min(100, (Math.abs(leader.pnl) / Math.max(...sortedPlayers.map(p => Math.abs(p.pnl)), 0.001)) * 100)}%`,
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1485:                          const maxPnl = Math.max(
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1486:                            ...sortedPlayers.map(p => Math.abs(p.pnl)),
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1490:                            player.pnl === 0
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1494:                                  (Math.abs(player.pnl) / maxPnl) * 100
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1514:                                    {getPnlSign(player.pnl)}
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1515:                                    {formatPnl(player.pnl)}
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1553:                              getPnlColorClass(player.pnl)
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1556:                            {getPnlSign(player.pnl)}
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1557:                            {formatPnl(player.pnl)}
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1601:                                  {getPnlSign(player.pnl)}
apps/web-terminal/src/ui/dashboard/widgets/pvp-spectator-widget/game-browser.tsx:1602:                                  {formatPnl(player.pnl)}