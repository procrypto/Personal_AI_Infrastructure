# Roadmap: QA Coordination Hub

## Overview

Transform qa-tools from a smoke test suite into the human coordination layer for QA at BONKbot. The journey moves from foundational data infrastructure, through Linear and Slack integration, to smart assignment algorithms, and culminates in three operational modes: Pre-release QA (Linear-triggered), Ceremony QA (deployment coordination), and Alert-triggered QA (Grafana alerting).

## Domain Expertise

None

## Phases

**Phase Numbering:**
- Integer phases (1, 2, 3): Planned milestone work
- Decimal phases (2.1, 2.2): Urgent insertions (marked with INSERTED)

- [x] **Phase 1: Foundation** - Data model, Vercel KV schemas, event bus
- [ ] **Phase 2: Linear Integration** - Linear webhook handler, tester profile sync
- [ ] **Phase 3: Slack Listener & Threads** - Capture Linear messages, thread replies with Block Kit
- [ ] **Phase 4: Assignment Engine** - Smart scoring algorithm for tester assignment
- [ ] **Phase 5: Commands & Actions** - Slash commands and button action handlers
- [ ] **Phase 6: Escalation & Routines** - Stale ticket escalation, morning summary
- [ ] **Phase 7: Ceremony QA** - Ceremony Tracker integration for deployment coordination
- [ ] **Phase 8: Alert-triggered QA** - Grafana webhook receiver, config-driven triggers

## Phase Details

### Phase 1: Foundation
**Goal**: Establish data model (QATicket, TesterProfile, LinearMessage), Vercel KV schemas, and event bus for surface notifications
**Depends on**: Nothing (first phase)
**Research**: Complete (see DISCOVERY.md)
**Plans**: 3 plans, 9 tasks

Plans:
- [x] 01-01: Data model and TypeScript interfaces (3 tasks)
- [x] 01-02: Vercel KV store setup and schemas (3 tasks)
- [x] 01-03: Event bus for surface notifications (3 tasks)

### Phase 2: Linear Integration
**Goal**: Handle Linear "QA:Mods" view-add webhook events and sync tester profiles from Linear users
**Depends on**: Phase 1
**Research**: Likely (Linear API, webhook events)
**Research topics**: Linear webhook payload structure for view-add events, Linear API for user sync
**Plans**: TBD

Plans:
- [x] 02-01: Linear webhook handler for view-add events
- [ ] 02-02: Tester profile sync from Linear users

### Phase 3: Slack Listener & Threads
**Goal**: Capture Linear's native Slack messages, map to ticket IDs, reply in threads with Block Kit UI
**Depends on**: Phase 2
**Research**: Likely (Slack Events API, Block Kit)
**Research topics**: Slack Events API for message capture, Block Kit interactive components, thread reply patterns
**Plans**: TBD

Plans:
- [ ] 03-01: Slack listener for Linear message capture
- [ ] 03-02: Message-to-ticket ID mapping store
- [ ] 03-03: Thread reply Block Kit messages with buttons

### Phase 4: Assignment Engine
**Goal**: Smart tester assignment algorithm based on expertise, workload, history, and priority
**Depends on**: Phase 3
**Research**: Unlikely (internal algorithm, no external APIs)
**Plans**: TBD

Plans:
- [ ] 04-01: Scoring algorithm implementation
- [ ] 04-02: Assignment notification via event bus

### Phase 5: Commands & Actions
**Goal**: Slack slash commands (/qa-queue, /qa-claim, /qa-my-tickets) and button action handlers (claim, pass, blocked)
**Depends on**: Phase 4
**Research**: Likely (Slack slash commands, interactivity)
**Research topics**: Slack slash command setup, action payload handling, response patterns
**Plans**: TBD

Plans:
- [ ] 05-01: Slash command handlers
- [ ] 05-02: Button action handlers (claim, pass, blocked)

### Phase 6: Escalation & Routines
**Goal**: 24h/48h stale ticket escalation warnings in threads, morning routine summary post
**Depends on**: Phase 5
**Research**: Unlikely (internal scheduling, established Slack patterns)
**Plans**: TBD

Plans:
- [ ] 06-01: Escalation checker (cron-based)
- [ ] 06-02: Morning routine summary post

### Phase 7: Ceremony QA
**Goal**: Ceremony Tracker webhook receiver, session management, checklist posting, completion callback
**Depends on**: Phase 1 (can run in parallel with 2-6 after foundation)
**Research**: Likely (Ceremony Tracker API)
**Research topics**: Ceremony Tracker webhook contract, callback interface
**Plans**: TBD

Plans:
- [ ] 07-01: Ceremony Tracker webhook receiver
- [ ] 07-02: Session management and checklist posting
- [ ] 07-03: Completion callback to Ceremony Tracker

### Phase 8: Alert-triggered QA
**Goal**: Grafana alerting webhook receiver, config-driven thresholds for triggering tester attention on elevated metrics
**Depends on**: Phase 1 (can run in parallel with 2-7 after foundation)
**Research**: Likely (Grafana alerting webhooks)
**Research topics**: Grafana alerting webhook payload structure, existing 40+ webhook setup patterns
**Plans**: TBD

Plans:
- [ ] 08-01: Grafana webhook receiver
- [ ] 08-02: Config-driven trigger thresholds
- [ ] 08-03: Alert-to-tester notification flow

## Progress

**Execution Order:**
Phases execute in numeric order: 1 → 2 → 3 → 4 → 5 → 6 → 7 → 8
(Phases 7 and 8 can potentially run in parallel after Phase 1)

| Phase | Plans Complete | Status | Completed |
|-------|----------------|--------|-----------|
| 1. Foundation | 3/3 | Complete | 2026-01-08 |
| 2. Linear Integration | 0/2 | Not started | - |
| 3. Slack Listener & Threads | 0/3 | Not started | - |
| 4. Assignment Engine | 0/2 | Not started | - |
| 5. Commands & Actions | 0/2 | Not started | - |
| 6. Escalation & Routines | 0/2 | Not started | - |
| 7. Ceremony QA | 0/3 | Not started | - |
| 8. Alert-triggered QA | 0/3 | Not started | - |
