# Milestone v1.1: Hardening

**Status:** SHIPPED 2026-01-13
**Phases:** 8-10
**Total Plans:** 3

## Overview

Fix TypeScript errors blocking type checks and improve CI/CD reliability with health checks, build caching, resource configuration, and complete workflow secrets documentation.

## Phases

### Phase 8: TypeScript Fixes

**Goal**: Fix pre-existing TypeScript errors blocking `bun tsc --noEmit`
**Depends on**: Phase 7 (v1.0 complete)
**Plans**: 1 plan

Plans:
- [x] 08-01: Fix TypeScript errors in 2 files

**Details:**
- Removed unsupported timeout argument from clickhouseQuery call
- Exported TokenSearchResult type for use in extensions
- Added proper union type narrowing to search_token_details extension

### Phase 9: CI Hardening

**Goal**: Improve CI/CD reliability with health checks, caching, and resource configuration
**Depends on**: Phase 8
**Plans**: 1 plan

Plans:
- [x] 09-01: Add health checks and build caching to workflows

**Details:**
- Added Dockerfile HEALTHCHECK instruction (30s interval, 5s timeout, 3 retries)
- Implemented Docker Buildx with GitHub Actions cache
- Configured Cloud Run resource limits (512Mi memory, 1 CPU, 0-10 instances)
- Added post-deploy health verification step

### Phase 10: Workflow Secrets

**Goal**: Complete workflow configuration with missing secrets and clearer placeholder docs
**Depends on**: Phase 9
**Plans**: 1 plan

Plans:
- [x] 10-01: Add missing secrets and improve placeholder documentation

**Details:**
- Added TWITTER_API_KEY to workflow secrets
- Created Pre-Deploy Checklist section in DEPLOYMENT.md
- Added explicit placeholder replacement table
- Added validation command to check for unreplaced placeholders

---

## Milestone Summary

**Decimal Phases:**
None - all phases were planned work

**Key Decisions:**
- Used curl for Dockerfile HEALTHCHECK (simpler, standard approach)
- 512Mi memory, 1 CPU, 0-10 instances for Cloud Run (conservative defaults)
- 15s sleep before health check allows cold start stabilization
- For loop for IAM bindings to reduce repetition in DEPLOYMENT.md

**Issues Resolved:**
- 6 TypeScript errors that blocked `bun tsc --noEmit`
- Missing TWITTER_API_KEY secret in workflows
- Unclear placeholder replacement instructions in DEPLOYMENT.md

**Issues Deferred:**
None

**Technical Debt Incurred:**
None

---

_For current project status, see .planning/ROADMAP.md_
