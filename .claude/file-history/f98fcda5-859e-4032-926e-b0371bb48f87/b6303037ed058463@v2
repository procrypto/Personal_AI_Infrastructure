# Roadmap: Token Analysis Autopilot

## Overview

Transform the backend from a data-polling evaluation engine into a pure signal processor. The main app will firehose market data via existing WebSocket connections, this backend evaluates and emits signals. Architecture will be LOIS-ready for future Rust rewrite. Gradual replacement approach — swap each piece when ready.

## Domain Expertise

None

## Phases

**Phase Numbering:**
- Integer phases (1, 2, 3): Planned milestone work
- Decimal phases (2.1, 2.2): Urgent insertions (marked with INSERTED)

- [ ] **Phase 1: Data Reception** - Invert data flow: receive market data from main app via existing WebSocket connections
- [ ] **Phase 2: Dual-Path Engine** - Pre-computed metrics path for simple rules, raw OHLCV path for complex analysis
- [ ] **Phase 3: Interface Cleanup & Cutover** - LOIS-ready interfaces, sub-100ms validation, complete gradual replacement

## Phase Details

### Phase 1: Data Reception
**Goal**: Replace BONKbot API polling with receiving firehosed data from main app via existing WebSocket connections
**Depends on**: Nothing (first phase)
**Research**: Unlikely (internal WebSocket patterns, existing server code to extend)
**Plans**: TBD

Plans:
- [x] 01-01: WebSocket data feed handlers
- [ ] 01-02: Data validation and normalization layer
- [ ] 01-03: Data layer tests

### Phase 2: Dual-Path Engine
**Goal**: Route data to appropriate processing paths — pre-computed metrics for simple rules, raw OHLCV for complex analysis (rotations, fractals)
**Depends on**: Phase 1
**Research**: Unlikely (extending existing rule engine, internal routing logic)
**Plans**: TBD

Plans:
- [ ] 02-01: Pre-computed metrics path for simple rules
- [ ] 02-02: Raw OHLCV path for complex analysis
- [ ] 02-03: Rule categorization and routing

### Phase 3: Interface Cleanup & Cutover
**Goal**: Clean interfaces for Rust reimplementation, validate sub-100ms latency, complete gradual replacement
**Depends on**: Phase 2
**Research**: Unlikely (internal interface design, LOIS integration is future scope)
**Plans**: TBD

Plans:
- [ ] 03-01: Interface abstraction for LOIS compatibility
- [ ] 03-02: Performance validation and optimization
- [ ] 03-03: Final cutover and cleanup

## Progress

**Execution Order:**
Phases execute in numeric order: 1 → 2 → 3

| Phase | Plans Complete | Status | Completed |
|-------|----------------|--------|-----------|
| 1. Data Reception | 1/3 | In progress | - |
| 2. Dual-Path Engine | 0/3 | Not started | - |
| 3. Interface Cleanup & Cutover | 0/3 | Not started | - |
