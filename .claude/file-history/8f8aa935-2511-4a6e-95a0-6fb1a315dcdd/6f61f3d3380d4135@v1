---
phase: 02-intel-grid-features
plan: 01
type: execute
---

<objective>
Validate Intel Grid features work correctly with the unified trenchBenchStore architecture.

Purpose: Features were integrated during merge (Phase 1), this plan validates they function correctly with the new data layer.
Output: Confirmed working pause-on-hover, badges, and chart refresh - or identified bugs to fix.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior phase context (from frontmatter):
@.planning/phases/01-branch-foundation/01-01-SUMMARY.md
@.planning/phases/01-branch-foundation/01-02-SUMMARY.md

# Key files:
@apps/web-terminal/src/ui/dashboard/widgets/intel-grid-widget.tsx
@apps/web-terminal/src/store/trenchBenchStore.ts

**Tech stack available:** trenchBenchStore, useTrenchBenchBackfill, CustomEvents (hybrid)
**Established patterns:** Token amount tracking for position exit detection
**Constraining decisions:**
- [01-01]: Keep trenchBenchStore from preload-data as primary data source
- [01-01]: Keep CustomEvents from dash-pauls during hybrid phase
</context>

<tasks>

<task type="auto">
  <name>Task 1: Validate pause-on-hover with store data flow</name>
  <files>apps/web-terminal/src/ui/dashboard/widgets/intel-grid-widget.tsx</files>
  <action>
Test pause-on-hover logic against trenchBenchStore data flow:

1. Verify `isPaused` state correctly freezes `pausedOrder` when mouse enters grid
2. Verify `displayTokens` shows frozen order but with LIVE data (MC, positions update while paused)
3. Verify mouse leave resets `pausedOrder` and resumes normal ordering
4. Check that `pauseStore` persists state correctly per widget instance

If any issues found: document bug, create minimal fix, verify fix works.
If working correctly: document verification in console.log or code comment for human review.
  </action>
  <verify>
Console.log or debug output showing:
- Pause state toggles correctly on mouse enter/leave
- pausedOrder captures mint order when pausing
- displayTokens returns live data in frozen order while paused
  </verify>
  <done>Pause-on-hover either confirmed working OR bug identified and fixed</done>
</task>

<task type="auto">
  <name>Task 2: Validate badge logic with positionsByToken data</name>
  <files>apps/web-terminal/src/ui/dashboard/widgets/intel-grid-widget.tsx</files>
  <action>
Verify badge calculation logic works with trenchBenchStore data:

1. Check `kolsHoldingStrong` calculation - should count KOLs where `holdingPercent > 50`
2. Verify `holdingPercent` is calculated correctly from `positionsByToken` data structure:
   - `currentAmountTokens / entryAmountTokens * 100` (token amounts, not SOL)
3. Verify badge priority: HOT (7+ strong) > TRENDING (5+ KOLs, 5+ activity, 3+ strong) > RISING > NEW

Known from merge decisions: Use token amounts (not SOL) for position exit detection.

If calculations are wrong: fix the holdingPercent or badge threshold logic.
If working correctly: add console.log showing sample badge calculations for human verification.
  </action>
  <verify>
Console output showing for a sample token:
- kolsHoldingStrong count
- holdingPercent calculation for each KOL
- Which badge was assigned and why
  </verify>
  <done>Badge logic either confirmed working OR calculation bug identified and fixed</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Validated pause-on-hover and badge logic with trenchBenchStore data</what-built>
  <how-to-verify>
    1. Run: cd apps/web-terminal && npm run dev
    2. Navigate to dashboard with Intel Grid widget
    3. Test pause-on-hover:
       - Hover over grid area
       - Observe pause indicator (yellow pause icon in corner)
       - Verify token ORDER freezes but MC values continue updating
       - Mouse away, verify ordering resumes
    4. Test badge display:
       - Look for HOT (red), TRENDING (yellow), RISING (green), NEW (blue) badges
       - Verify badges appear on appropriate tokens (high KOL conviction = HOT)
    5. Open browser console for debug output from validation tasks
  </how-to-verify>
  <resume-signal>Type "approved" if features work correctly, or describe issues to investigate</resume-signal>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] Pause-on-hover toggles correctly and freezes order (not data)
- [ ] Badge logic calculates correctly using token amounts (not SOL)
- [ ] HOT/TRENDING/RISING/NEW badges appear on appropriate tokens
- [ ] No TypeScript errors (`tsc --noEmit` passes)
- [ ] No console errors during feature use
</verification>

<success_criteria>
- All Intel Grid features confirmed working OR bugs identified and fixed
- Human verification of visual/interactive behavior passed
- No regressions introduced
- Ready for Phase 3 (Cross-Widget Sync)
</success_criteria>

<output>
After completion, create `.planning/phases/02-intel-grid-features/02-01-SUMMARY.md`:

# Phase 2 Plan 01: Intel Grid Validation Summary

**[Substantive one-liner]**

## Accomplishments

## Files Created/Modified

## Decisions Made

## Issues Encountered

## Next Phase Readiness
</output>
