/**
 * Endpoint Template
 *
 * Copy this file to src/endpoints/custom/my_endpoint.ts and customize.
 * Then register it in src/server.ts.
 *
 * ⚠️  Remember: This API fetches PRODUCTION data. Keep strict limits.
 */

import type { Elysia } from "elysia";

// =============================================================================
// Types
// =============================================================================

type TemplateRequest = {
    exampleInput: string;
    // Add more fields as needed
};

type TemplateResponse = {
    ok: boolean;
    message: string;
    data?: unknown;
};

// =============================================================================
// Endpoint Registration
// =============================================================================

export const registerTemplateRoutes = (app: Elysia) => {
    app.post("/template", async ({ body }) => {
        const req = body as TemplateRequest;

        // ---------------------------------------------------------------------
        // 1. Validate inputs
        // ---------------------------------------------------------------------
        if (!req.exampleInput) {
            return {
                ok: false,
                message: "Missing exampleInput",
            } satisfies TemplateResponse;
        }

        // ---------------------------------------------------------------------
        // 2. Build query (if using ClickHouse)
        // ---------------------------------------------------------------------
        // import { clickhouseQuery } from "../../clickhouse/client";
        //
        // const sql = `SELECT ... FROM ... WHERE ... LIMIT 100`;
        // const result = await clickhouseQuery(sql);
        // if (!result.success) {
        //     return { ok: false, message: result.error ?? "Query failed" };
        // }

        // ---------------------------------------------------------------------
        // 3. Return response
        // ---------------------------------------------------------------------
        return {
            ok: true,
            message: `Received: ${req.exampleInput}`,
            data: null,
        } satisfies TemplateResponse;
    });
};





