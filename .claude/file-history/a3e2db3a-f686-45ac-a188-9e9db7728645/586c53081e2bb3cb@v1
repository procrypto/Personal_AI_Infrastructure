---
phase: 06-real-time-activity-indicators
plan: 01
subsystem: ui
tags: [react, hooks, useEffect, useState, live-updates]

# Dependency graph
requires:
  - phase: 05-unit-tests
    provides: Tested autopilot store and P&L calculation
provides:
  - Live-updating "time ago" hook (useTimeAgo)
  - Scan countdown component (ScanCountdown)
  - Real-time activity indicators in widget header
affects: [07-layout-reorganization, 08-collapsible-sections]

# Tech tracking
tech-stack:
  added: []
  patterns: [adaptive-interval-refresh]

key-files:
  created:
    - apps/web-terminal/src/hooks/useAutopilot/useTimeAgo.ts
  modified:
    - apps/web-terminal/src/hooks/useAutopilot/index.ts
    - apps/web-terminal/src/ui/dashboard/widgets/autopilot-widget.tsx

key-decisions:
  - "Adaptive interval refresh: 1s when <60s old, 10s when <5m, 30s otherwise"
  - "ScanCountdown displays 'Scanning...' when countdown <= 0"

patterns-established:
  - "useTimeAgo hook: Reusable pattern for live-updating timestamps throughout app"

issues-created: []

# Metrics
duration: 3min
completed: 2026-01-08
---

# Phase 6 Plan 1: Live Timestamps and Scan Countdown Summary

**Custom useTimeAgo hook with adaptive refresh intervals, ScanCountdown component showing live countdown to next scan**

## Performance

- **Duration:** 3 min
- **Started:** 2026-01-08T18:27:29Z
- **Completed:** 2026-01-08T18:30:37Z
- **Tasks:** 2
- **Files modified:** 3

## Accomplishments

- Created useTimeAgo hook with intelligent interval scheduling (1s/10s/30s based on age)
- Applied live "Xs ago" / "Xm ago" display to LastAnalysisRow component
- Created ScanCountdown component showing real-time countdown to next scan
- Integrated countdown into widget header after scan info

## Task Commits

Each task was committed atomically:

1. **Task 1: Create useTimeAgo hook and apply to LastAnalysisRow** - `3a6e59a14` (feat)
2. **Task 2: Create ScanCountdown component and add to widget header** - `7be385e2f` (feat)

**Plan metadata:** (this commit) (docs: complete plan)

## Files Created/Modified

- `apps/web-terminal/src/hooks/useAutopilot/useTimeAgo.ts` - New hook for live-updating time ago strings
- `apps/web-terminal/src/hooks/useAutopilot/index.ts` - Export useTimeAgo hook
- `apps/web-terminal/src/ui/dashboard/widgets/autopilot-widget.tsx` - ScanCountdown component + useTimeAgo integration

## Decisions Made

- Used adaptive refresh intervals to balance responsiveness vs CPU usage
- Countdown shows "Scanning..." when <= 0 seconds (provides visual feedback during scan)
- Countdown only shown when isConnected is true

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered

None.

## Next Phase Readiness

- Real-time activity indicators complete
- Widget now provides visual reassurance of autopilot activity
- Ready for Phase 7: Layout Reorganization

---
*Phase: 06-real-time-activity-indicators*
*Completed: 2026-01-08*
