# Project State

## Project Reference

See: .planning/PROJECT.md (updated 2026-01-08)

**Core value:** Full feature parity with the CLI through the dashboard widget
**Current focus:** v2.0 Backend Integration - reverse WebSocket architecture (frontend as client)

## Current Position

Phase: 27 of 27 (Feed Forwarding)
Plan: Not started
Status: Ready for execution
Last activity: 2026-01-09 — Added Phase 27 for cross-repo feed forwarding

Progress: ██████████ 100% (v2.0) | ░░░░░░░░░░ 0% (v2.1)

## Cross-Repo Integration

**This phase coordinates with token-analysis-autopilot repo.**

| This Repo (Frontend)      | Backend Repo              | Status        |
| ------------------------- | ------------------------- | ------------- |
| Phase 27: Feed Forwarding | Phase 5: (tracks this)    | **Ready**     |
| —                         | Phase 6: Feed Consumption | Blocked by 27 |
| —                         | Phase 7: Validation       | Blocked by 6  |

Backend tracking: `~/Documents/BONKbot/github/token-analysis-autopilot/.planning/`

## Performance Metrics

**Velocity:**

- Total plans completed: 23
- Average duration: 7.9 min
- Total execution time: 3.0 hours

**By Phase:**

| Phase | Plans | Total | Avg/Plan |
| ----- | ----- | ----- | -------- |
| 01    | 1     | 5min  | 5min     |
| 02    | 1     | 2min  | 2min     |
| 03    | 1     | 2min  | 2min     |
| 04    | 1     | 5min  | 5min     |
| 05    | 1     | 9min  | 9min     |
| 06    | 1     | 3min  | 3min     |
| 07    | 1     | 3min  | 3min     |
| 08    | 1     | 4min  | 4min     |
| 09    | 1     | 20min | 20min    |
| 10    | 1     | 8min  | 8min     |
| 11    | 1     | 9min  | 9min     |
| 12    | 1     | 8min  | 8min     |
| 13    | 1     | 48min | 48min    |
| 14    | 1     | 24min | 24min    |
| 18    | 1     | 3min  | 3min     |
| 22    | 3     | 18min | 6min     |
| 20    | 1     | 2min  | 2min     |
| 21    | 1     | 1min  | 1min     |
| 23    | 1     | 1min  | 1min     |
| 24    | 1     | 3min  | 3min     |
| 25    | 1     | 2min  | 2min     |
| 26    | 1     | 2min  | 2min     |

**Milestone Summary:**

| Milestone | Phases      | Plans | Duration | Shipped    |
| --------- | ----------- | ----- | -------- | ---------- |
| v1.0      | 1-4         | 4     | 14min    | 2026-01-08 |
| v1.1      | 5           | 1     | 9min     | 2026-01-08 |
| v1.2      | 6-8         | 3     | 10min    | 2026-01-08 |
| v1.3      | 9-11        | 3     | 37min    | 2026-01-08 |
| v1.4      | 12-17       | 6     | 96min    | 2026-01-09 |
| v1.5      | 18,22,20,21 | 6     | 24min    | 2026-01-09 |
| v2.0      | 23-26       | 4     | 8min     | 2026-01-09 |

## Accumulated Context

### Decisions

Decisions are logged in PROJECT.md Key Decisions table.
Key decisions from all milestones:

- LOIS documentation is a cross-cutting quality gate for all phases
- Recommend lois-adapter.ts pattern for format conversions at WebSocket boundary
- Autopilot plugin checks directory existence before spawning
- Extract pure functions for testability (calculatePnL, parseAutopilotEvent)
- Adaptive interval refresh for useTimeAgo (balance responsiveness vs CPU)
- Performance section at top, Configuration at bottom (set-and-forget)
- Only Performance and Activity sections collapsible
- Hybrid architecture: NATS for display prices, CLI for signal generation
- Calculate totalPnlSol in frontend from position data (not CLI stats)
- Defer CLI NATS integration to future milestone (data pipeline optimization)
- Derive SOL/USD price from market data (price_usd / price_sol) as fallback
- Realized P&L = totalPnlSol - unrealizedPnlSol (actual closed trade profit)
- Always show 5-column stats grid with Unrealized (even when no positions)
- Close All button in performance section, disabled when no positions
- Vantage-widget pattern for draggable floating SettingsPanel
- Portal to document.body when panel dragged (escape widget overflow)
- Rename "Tokens" section to "Screener"
- Frontend uses Discovery API/WebSocket for whale moves and trending (instant)
- Backend optimization (Discovery WebSocket integration) deferred to v2.0
- Signal indicators use confluence-based intensity (not time decay)
- Brand palette backgrounds (bg-success/bg-error) for signal highlighting
- Feed types separate from command types (sendFeed vs sendCommand for semantic clarity)

### Deferred Issues

None.

### Blockers/Concerns

None.

### Roadmap Evolution

- v1.0 archived: Autopilot Frontend Integration (4 phases, 4 plans)
- v1.1 archived: Autopilot Unit Tests (1 phase, 1 plan)
- v1.2 archived: Widget UX Polish (3 phases, 3 plans)
- Milestone v1.3 created: Get Shit Working (3 phases: Phase 9-11)
- Phase 15 added: Discovery API Integration (fast whale moves/trending from Discovery API)
- Phase 16 added: User Watchlist Integration (replace CLI watchlist with user's watchlist)
- Phase 17 added: Screener Signal Indicators (rules hit = green/red glow intensity)
- Milestone v1.5 created: AAT Fixes (4 phases: Phase 18-21)
- Phase 22 added: Watchlist-Style Screener with Volume Trends
- Phase 19 removed: Superseded by Phase 22 (screener alignment covered by watchlist-style table)
- Execution order updated: 18 → 22 → 20 → 21
- Milestone v2.0 created: Backend Integration (4 phases: Phase 23-26)

## Session Continuity

Last session: 2026-01-09
Stopped at: Added Phase 27 for cross-repo feed forwarding
Resume file: None
Next action: Execute Phase 27 plans (27-01, 27-02) to complete feed forwarding

## Next Steps

1. `/gsd:execute-plan .planning/phases/27-feed-forwarding/27-01-PLAN.md`
2. `/gsd:execute-plan .planning/phases/27-feed-forwarding/27-02-PLAN.md`
3. Return to backend repo for Phase 6
