---
phase: 11-design-system-alignment
plan: 01
type: execute
status: complete
completed: 2026-01-08
---

<objective>
Replace hardcoded Tailwind colors in AutopilotWidget with app design system variables.

Purpose: Ensure visual consistency with the rest of the app and proper theme support.
Output: AutopilotWidget using semantic color variables from index.css design system.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Prior Phase (dependency):**
@.planning/phases/10-data-flow-fixes/10-01-SUMMARY.md

**Key Files:**
@apps/web-terminal/src/ui/dashboard/widgets/autopilot-widget.tsx
@apps/web-terminal/src/index.css

**Design System Reference:**
The app uses semantic CSS variables defined in index.css:

| Raw Tailwind         | Design System Variable        | Semantic Meaning        |
| -------------------- | ----------------------------- | ----------------------- |
| text-green-400       | text-text-success             | Profit, positive change |
| text-red-400         | text-text-error               | Loss, negative change   |
| text-cyan-400        | text-text-turbo               | Turbo/accent color      |
| text-yellow-400      | text-text-warning             | Warning, caution        |
| text-blue-400        | text-text-info                | Info, neutral accent    |
| text-purple-400      | text-purple                   | Purple accent           |
| text-orange-400      | text-orange                   | Orange accent           |
| bg-green-500/20      | bg-bg-success-primary         | Success background      |
| bg-red-500/20        | bg-bg-error-primary           | Error background        |
| bg-yellow-500/20     | bg-bg-warning-primary         | Warning background      |
| border-green-500/30  | border-border-success-primary | Success border          |
| border-red-500/30    | border-border-error-primary   | Error border            |
| border-yellow-500/30 | border-border-warning-primary | Warning border          |
| border-cyan-500/20   | border-border-turbo-primary   | Turbo border            |

**Note:** Some colors like orange and gray may need to stay as Tailwind (no semantic equivalent).
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace hardcoded colors with design system variables</name>
  <files>apps/web-terminal/src/ui/dashboard/widgets/autopilot-widget.tsx</files>
  <action>
Update all color classes in autopilot-widget.tsx to use design system variables:

**Text colors:**

- `text-green-400` → `text-text-success`
- `text-red-400` → `text-text-error`
- `text-cyan-400` → `text-text-turbo`
- `text-yellow-400` → `text-text-warning`
- `text-blue-400` → `text-text-info`
- `text-purple-400` → `text-purple`
- `text-gray-400` → `text-text-secondary`

**Background colors:**

- `bg-green-500/20` → `bg-bg-success-primary`
- `bg-red-500/20` → `bg-bg-error-primary`
- `bg-yellow-500/20` → `bg-bg-warning-primary`
- `bg-gray-500/20` → `bg-bg-tertiary`
- `bg-cyan-500/10` → `bg-bg-turbo-primary`

**Border colors:**

- `border-green-500/30` → `border-border-success-primary`
- `border-red-500/30` → `border-border-error-primary`
- `border-yellow-500/30` → `border-border-warning-primary`
- `border-cyan-500/20` → `border-border-turbo-primary`

**Keep unchanged (no semantic equivalent):**

- `text-orange-400` (Flame icon) - use `text-orange`
- Signal type colors that need distinct values (blue for rule_signal, etc.)

Work through each component systematically:

1. MarketStatusBadge - NORMAL/CAUTION/DUMP states
2. PositionCard - profit/loss indicators
3. SignalItem - signal type colors
4. TokenRow - price change colors
5. TokenListSection - icon colors
6. ControlsPanel - mode badges, toggle icons
7. StrategiesPanel - active/inactive states
8. StatsPanel - win rate, P&L colors
9. LastAnalysisRow - outcome colors
10. Main widget - connection status, header
    </action>
    <verify>Run `bun run typecheck` to ensure no TypeScript errors from invalid class names</verify>
    <done>All hardcoded Tailwind color classes replaced with design system variables where semantic equivalents exist</done>
    </task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Updated AutopilotWidget colors to use app design system</what-built>
  <how-to-verify>
    1. Run: `cd apps/web-terminal && bun run dev`
    2. Open: http://localhost:5174
    3. Navigate to Dashboard and locate the Autopilot widget
    4. Verify these color states:
       - **Success state (green):** P&L positive, win rate ≥50%, market NORMAL
       - **Error state (red):** P&L negative, win rate <50%, market DUMP
       - **Warning state (yellow):** Market CAUTION, paper mode badge
       - **Turbo state (cyan):** BUY signal, position with OPEN badge
       - **Info state (blue):** Auto Sources icon, rule_signal type
    5. Compare visual appearance with other widgets (watchlist, portfolio)
    6. Check both expanded and collapsed states
    7. Verify no jarring color differences from rest of app
  </how-to-verify>
  <resume-signal>Type "approved" if colors match app design system, or describe specific issues</resume-signal>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `bun run typecheck` passes without errors
- [ ] All semantic colors use design system variables
- [ ] Widget visually consistent with other app widgets
- [ ] No regression in functionality
</verification>

<success_criteria>

- All hardcoded Tailwind colors replaced with design system variables
- Widget colors match app theme (success=lime-green, error=red, turbo=cyan)
- Human verification confirms visual consistency
- TypeScript compilation succeeds
- Phase 11 and milestone v1.3 complete
  </success_criteria>

<output>
After completion, create `.planning/phases/11-design-system-alignment/11-01-SUMMARY.md`:

# Phase 11 Plan 01: Design System Alignment Summary

**[Substantive one-liner about what shipped]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `apps/web-terminal/src/ui/dashboard/widgets/autopilot-widget.tsx` - Updated color classes

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Phase complete, milestone v1.3 complete. Autopilot frontend integration ready for use.
</output>
