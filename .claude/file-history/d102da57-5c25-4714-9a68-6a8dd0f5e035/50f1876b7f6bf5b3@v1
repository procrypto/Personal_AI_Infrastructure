# Coding Conventions

**Analysis Date:** 2026-01-09

## Naming Patterns

**Files:**
- kebab-case for all files: `paper-tracker.ts`, `magic-exits.ts`, `buy-sell-ratio.ts`
- Test files: `test.ts`, `test-trading.ts`, `test-comprehensive.ts` (in src/ root)
- index.ts for barrel exports

**Functions:**
- camelCase for all functions: `analyzeToken()`, `getMarketData()`, `addToWatchlist()`
- No prefix for async functions
- Factory functions: `create{EntityName}()` (e.g., `createPriceChangeRule()`)

**Variables:**
- camelCase for variables: `currentPrice`, `positionSizeSol`, `baselineVolume`
- UPPER_SNAKE_CASE for constants: `SOL_MINT`, `CONFIG_DIR`, `CONFIG_FILE`

**Types:**
- PascalCase for interfaces: `Signal`, `Rule`, `RuleConfig`, `TokenMarketData`
- PascalCase for classes: `RuleEngine`, `ApiClient`, `ConfigStore`
- PascalCase for type aliases: `Resolution`, `AnyRuleConfig`
- No "I" prefix for interfaces

## Code Style

**Formatting:**
- 2 space indentation
- Single quotes for strings
- Semicolons required
- ~100-120 character line length

**Linting:**
- TypeScript strict mode enforced via `tsconfig.json`
- No ESLint/Prettier config files (style enforced manually)
- `forceConsistentCasingInFileNames: true`

## Import Organization

**Order:**
1. External packages (`ws`, `fs/promises`)
2. Internal modules (`./rules/engine.js`, `./api/client.js`)
3. Type imports (`import type { Signal }`)

**Grouping:**
- Blank line between groups
- Alphabetical within each group

**Path Aliases:**
- No path aliases configured
- Relative imports with `.js` extension (ESM requirement)

## Error Handling

**Patterns:**
- Try-catch at boundaries (API calls, file I/O)
- Return null from analysis functions on error
- Continue on non-fatal errors in loops
- Log errors with context before continuing

**Error Types:**
- Throw on fatal configuration errors
- Return null for analysis failures
- Log and skip for individual token errors

## Logging

**Framework:**
- Console.log for normal output
- Console.error for errors
- Console.warn for non-fatal issues

**Patterns:**
- Emoji prefixes for visual scanning: ‚úì, ‚úó, ‚ö†, üìä, üîç
- Bracketed module names: `[WS]`, `[API]`, `[RULE]`
- Structured data for debugging

## Comments

**When to Comment:**
- File headers with purpose and usage
- Complex algorithms (rotations, Williams fractals)
- LOIS compatibility markers

**JSDoc/TSDoc:**
- Block comments on classes and major functions
- Brief one-liner description preferred
- `@param`, `@returns` for public APIs

**TODO Comments:**
- Format: `// TODO: description`
- Used for future enhancements (not blocking issues)

## Function Design

**Size:**
- Aim for under 50 lines
- Extract helpers for complex logic

**Parameters:**
- Max 3-4 parameters preferred
- Use config objects for more: `constructor(config: EngineConfig)`
- Destructure in function body

**Return Values:**
- Explicit returns
- Return early for guard clauses
- `Signal | null` pattern for optional results

## Module Design

**Exports:**
- Named exports preferred
- Default exports not used
- Re-export from index.ts barrel files

**Barrel Files:**
- index.ts re-exports public API
- One per directory
- Example: `src/rules/index.ts`

**Singleton Pattern:**
- Used for shared state: `configStore`, `paperTracker`, `wsServer`
- Exported as named constants at file bottom

---

*Convention analysis: 2026-01-09*
*Update when patterns change*
