# Milestone v1.5: AAT Fixes

**Status:** SHIPPED 2026-01-09
**Phases:** 18, 22, 20, 21
**Total Plans:** 6

## Overview

Fix critical bugs (token names, Sell All, P&L), watchlist-style screener with volume trends, rename widget to AAT (Autonomous Anomaly Terminal).

**Execution Order:** 18 → 22 → 20 → 21 (Phase 19 removed - superseded by 22)

## Phases

### Phase 18: Data Fixes

**Goal**: Fix watchlist token names (showing blank) + show market cap instead of tiny prices
**Depends on**: Phase 17
**Plans**: 1 plan

Plans:

- [x] 18-01: Fix blank symbols and display market cap

**Details:**
- Symbol enrichment from NATS market data for watchlist tokens
- Market cap display with K/M suffixes ($234K, $1.2M)
- formatMarketCap helper pattern

### Phase 22: Watchlist-Style Screener with Volume Trends

**Goal**: Adopt production Watchlist widget layout for three screener columns. Replace liquidity/volume columns with mcap, price, and volume trend score. Volume trend = 15m vs 6h ratio, buy/sell volume momentum analysis.
**Depends on**: Phase 18
**Plans**: 3 plans

Plans:

- [x] 22-01: Data Source Consolidation
- [x] 22-02: Watchlist-Style Table Layout
- [x] 22-03: Volume Trend Scoring (Vz indicator)

**Details:**
- Watchlist-style compact table layout
- Signal indicators with confluence-based backgrounds
- Vz volume delta indicator (CVD-inspired)
- Debug panel with simulation mode

### Phase 20: Controls & Accuracy

**Goal**: Fix Sell All button (doesn't close positions) + fix P&L calculations
**Depends on**: Phase 22
**Plans**: 1 plan

Plans:

- [x] 20-01: Frontend Close Controls

**Details:**
- close_all_positions command wiring
- Per-position X button for closing individual positions
- onClose callback pattern

### Phase 21: AAT Naming

**Goal**: Rename widget from "Autopilot" to "AAT Autonomous Anomaly Terminal"
**Depends on**: Phase 20
**Plans**: 1 plan

Plans:

- [x] 21-01: AAT branding string updates

**Details:**
- Widget header: "Token Autopilot" → "AAT"
- Catalog title: "AAT Autonomous Anomaly Terminal"
- Preset name: "Autopilot" → "AAT"
- Internal code names preserved as "autopilot"

---

## Milestone Summary

**Key Decisions:**

- Internal code names preserved as "autopilot" to avoid massive refactor
- CVD-inspired volume delta (Vz) for buy/sell pressure indication
- Signal confluence determines background intensity (not time decay)
- Simulation mode for testing signal glow effects

**Issues Resolved:**

- Blank token symbols in watchlist (NATS enrichment)
- Unreadable tiny prices replaced with market cap
- Sell All button now sends correct command
- Per-position close controls working

**Issues Deferred:**

- None

**Technical Debt Incurred:**

- Debug panel with simulation mode should be removed before production

---

_For current project status, see .planning/ROADMAP.md_
