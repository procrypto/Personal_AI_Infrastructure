/**
 * Configuration Types
 *
 * User configuration for the analysis autopilot.
 */

import type { RuleSet } from '../rules/types.js';

export interface WatchlistToken {
  mint: string;
  symbol?: string;
  name?: string;
  addedAt: number;
}

export interface TriggerConfig {
  enabled: boolean;
  mode: 'paper' | 'live'; // Paper trading or live LOIS
  defaultPositionSizeSol: number;
  maxPositionSizeSol: number;
  cooldownMs: number; // Minimum time between triggers for same token
  onOppositeSignal: 'close' | 'flip' | 'ignore'; // What to do when opposite signal fires
}

export interface UserConfig {
  version: number;
  createdAt: number;
  updatedAt: number;

  // Tokens to monitor
  watchlist: WatchlistToken[];

  // Active rule sets
  ruleSets: RuleSet[];

  // Trigger configuration
  trigger: TriggerConfig;

  // Analysis interval
  pollIntervalMs: number;
}

export const DEFAULT_CONFIG: UserConfig = {
  version: 1,
  createdAt: Date.now(),
  updatedAt: Date.now(),
  watchlist: [],
  ruleSets: [],
  trigger: {
    enabled: true,
    mode: 'paper',
    defaultPositionSizeSol: 0.1,
    maxPositionSizeSol: 1,
    cooldownMs: 60000, // 1 minute
    onOppositeSignal: 'close', // close position on opposite signal
  },
  pollIntervalMs: 30000, // 30 seconds
};
