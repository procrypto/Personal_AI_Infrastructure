/* eslint-disable lingui/no-unlocalized-strings */
import type { Layout } from "react-grid-layout";
import type { DashboardPreset } from "@/store/persistentStore/slices/dashboard-store/types";
import PvPIcon from "@/assets/icons/pvp/mdi_pen-remove.svg";
import { Home, ChartColumnBig, Bot } from "lucide-react";

/**
 * Built-in Dashboard Presets
 *
 * Purpose-built layouts for different trading contexts.
 * These cannot be deleted by users, only customized.
 *
 * Size Reference (row height = 100px):
 * - S:  4×3.5 = 350px (perfect fit for 6 widgets on 16" Mac)
 * - M:  4×5   = 500px
 * - L:  4×8   = 800px
 * - XL: 6×8   = 800px
 *
 * Available widgets:
 * - portfolio, watchlist, kols
 * - mini-trade (multi-instance), pvp-spectator
 * - xray-bubble (XL only)
 */

// ============================================
// PvP Lobby Mode - Competitive trading focused
// Features: PvP Spectator, KOLs, Portfolio, Watchlist
// PvP Spectator and KOLs use custom tall size to fit everything
// ============================================
const pvpBattleWidgets = ["pvp-spectator", "kols", "portfolio", "watchlist"];

const pvpBattleLayoutLg: Layout[] = [
  // Left: PvP Spectator (custom tall)
  { i: "pvp-spectator", x: 0, y: 0, w: 4, h: 7, minW: 4, minH: 3.5 },
  // Middle: KOLs (custom tall)
  { i: "kols", x: 4, y: 0, w: 4, h: 7, minW: 4, minH: 3.5 },
  // Right column: Portfolio (S) + Watchlist (S) stacked
  { i: "portfolio", x: 8, y: 0, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "watchlist", x: 8, y: 3.5, w: 4, h: 3.5, minW: 4, minH: 3.5 },
];

const pvpBattleLayoutMd: Layout[] = [
  { i: "pvp-spectator", x: 0, y: 0, w: 4, h: 7, minW: 4, minH: 3.5 },
  { i: "kols", x: 4, y: 0, w: 4, h: 7, minW: 4, minH: 3.5 },
  { i: "portfolio", x: 0, y: 7, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "watchlist", x: 4, y: 7, w: 4, h: 3.5, minW: 4, minH: 3.5 },
];

const pvpBattleLayoutSm: Layout[] = [
  { i: "pvp-spectator", x: 0, y: 0, w: 4, h: 7, minW: 4, minH: 3.5 },
  { i: "kols", x: 0, y: 7, w: 4, h: 7, minW: 4, minH: 3.5 },
  { i: "portfolio", x: 0, y: 14, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "watchlist", x: 0, y: 17.5, w: 4, h: 3.5, minW: 4, minH: 3.5 },
];

const pvpBattleLayoutXl: Layout[] = [
  { i: "pvp-spectator", x: 0, y: 0, w: 4, h: 7, minW: 4, minH: 3.5 },
  { i: "kols", x: 4, y: 0, w: 4, h: 7, minW: 4, minH: 3.5 },
  { i: "portfolio", x: 8, y: 0, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "watchlist", x: 8, y: 3.5, w: 4, h: 3.5, minW: 4, minH: 3.5 },
];

const pvpBattleLayoutXxl: Layout[] = [
  { i: "pvp-spectator", x: 0, y: 0, w: 4, h: 7, minW: 4, minH: 3.5 },
  { i: "kols", x: 4, y: 0, w: 4, h: 7, minW: 4, minH: 3.5 },
  { i: "portfolio", x: 8, y: 0, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "watchlist", x: 8, y: 3.5, w: 4, h: 3.5, minW: 4, minH: 3.5 },
];

// ============================================
// Overview Mode - Full dashboard overview
// Features: X-Ray Bubbles, Portfolio, PvP Spectator, Watchlist, KOLs
// X-Ray Bubbles uses custom size to fit 16" MBP (not a preset size)
// ============================================
const overviewWidgets = [
  "xray-bubble",
  "portfolio",
  "pvp-spectator",
  "watchlist",
  "kols",
];

// Layout: X-Ray left (custom size), all others S size (4×3.5)
const overviewLayoutLg: Layout[] = [
  // Left: X-Ray Bubbles (custom narrow size to fit all widgets)
  { i: "xray-bubble", x: 0, y: 0, w: 4, h: 7, minW: 4, minH: 6 },
  // Top middle: Portfolio (S size)
  { i: "portfolio", x: 4, y: 0, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  // Top right: PvP Spectator (S size)
  { i: "pvp-spectator", x: 8, y: 0, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  // Bottom middle: Watchlist (S size)
  { i: "watchlist", x: 4, y: 3.5, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  // Bottom right: KOLs (S size)
  { i: "kols", x: 8, y: 3.5, w: 4, h: 3.5, minW: 4, minH: 3.5 },
];

const overviewLayoutMd: Layout[] = [
  { i: "xray-bubble", x: 0, y: 0, w: 4, h: 7, minW: 4, minH: 6 },
  { i: "portfolio", x: 4, y: 0, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "pvp-spectator", x: 4, y: 3.5, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "watchlist", x: 0, y: 7, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "kols", x: 4, y: 7, w: 4, h: 3.5, minW: 4, minH: 3.5 },
];

const overviewLayoutSm: Layout[] = [
  { i: "xray-bubble", x: 0, y: 0, w: 4, h: 7, minW: 4, minH: 6 },
  { i: "portfolio", x: 0, y: 7, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "pvp-spectator", x: 0, y: 10.5, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "watchlist", x: 0, y: 14, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "kols", x: 0, y: 17.5, w: 4, h: 3.5, minW: 4, minH: 3.5 },
];

const overviewLayoutXl: Layout[] = [
  { i: "xray-bubble", x: 0, y: 0, w: 4, h: 7, minW: 4, minH: 6 },
  { i: "portfolio", x: 4, y: 0, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "pvp-spectator", x: 8, y: 0, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "watchlist", x: 4, y: 3.5, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "kols", x: 8, y: 3.5, w: 4, h: 3.5, minW: 4, minH: 3.5 },
];

const overviewLayoutXxl: Layout[] = [
  { i: "xray-bubble", x: 0, y: 0, w: 4, h: 7, minW: 4, minH: 6 },
  { i: "portfolio", x: 4, y: 0, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "pvp-spectator", x: 8, y: 0, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "watchlist", x: 4, y: 3.5, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "kols", x: 8, y: 3.5, w: 4, h: 3.5, minW: 4, minH: 3.5 },
];

// ============================================
// Multi-Chart Mode - 6 Live Charts
// Perfect fit for 16" Mac with S size
// ============================================
const multiChartWidgets = [
  "mini-trade-1",
  "mini-trade-2",
  "mini-trade-3",
  "mini-trade-4",
  "mini-trade-5",
  "mini-trade-6",
];

// 6 charts in a 3x2 grid (each 4 cols wide, 3.5 rows tall)
const multiChartLayoutLg: Layout[] = [
  { i: "mini-trade-1", x: 0, y: 0, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "mini-trade-2", x: 4, y: 0, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "mini-trade-3", x: 8, y: 0, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "mini-trade-4", x: 0, y: 3.5, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "mini-trade-5", x: 4, y: 3.5, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "mini-trade-6", x: 8, y: 3.5, w: 4, h: 3.5, minW: 4, minH: 3.5 },
];

const multiChartLayoutMd: Layout[] = [
  { i: "mini-trade-1", x: 0, y: 0, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "mini-trade-2", x: 4, y: 0, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "mini-trade-3", x: 0, y: 3.5, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "mini-trade-4", x: 4, y: 3.5, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "mini-trade-5", x: 0, y: 7, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "mini-trade-6", x: 4, y: 7, w: 4, h: 3.5, minW: 4, minH: 3.5 },
];

const multiChartLayoutSm: Layout[] = [
  { i: "mini-trade-1", x: 0, y: 0, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "mini-trade-2", x: 0, y: 3.5, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "mini-trade-3", x: 0, y: 7, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "mini-trade-4", x: 0, y: 10.5, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "mini-trade-5", x: 0, y: 14, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "mini-trade-6", x: 0, y: 17.5, w: 4, h: 3.5, minW: 4, minH: 3.5 },
];

const multiChartLayoutXl: Layout[] = [
  { i: "mini-trade-1", x: 0, y: 0, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "mini-trade-2", x: 4, y: 0, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "mini-trade-3", x: 8, y: 0, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "mini-trade-4", x: 0, y: 3.5, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "mini-trade-5", x: 4, y: 3.5, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "mini-trade-6", x: 8, y: 3.5, w: 4, h: 3.5, minW: 4, minH: 3.5 },
];

const multiChartLayoutXxl: Layout[] = [
  { i: "mini-trade-1", x: 0, y: 0, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "mini-trade-2", x: 4, y: 0, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "mini-trade-3", x: 8, y: 0, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "mini-trade-4", x: 0, y: 3.5, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "mini-trade-5", x: 4, y: 3.5, w: 4, h: 3.5, minW: 4, minH: 3.5 },
  { i: "mini-trade-6", x: 8, y: 3.5, w: 4, h: 3.5, minW: 4, minH: 3.5 },
];

// ============================================
// Autopilot Mode - Token Analysis Autopilot
// Single large widget for demo day
// ============================================
const autopilotWidgets = ["autopilot"];

// Full-width layout for the autopilot widget
const autopilotLayoutLg: Layout[] = [
  { i: "autopilot", x: 0, y: 0, w: 12, h: 7, minW: 4, minH: 5 },
];

const autopilotLayoutMd: Layout[] = [
  { i: "autopilot", x: 0, y: 0, w: 8, h: 7, minW: 4, minH: 5 },
];

const autopilotLayoutSm: Layout[] = [
  { i: "autopilot", x: 0, y: 0, w: 4, h: 8, minW: 4, minH: 5 },
];

const autopilotLayoutXl: Layout[] = [
  { i: "autopilot", x: 0, y: 0, w: 12, h: 7, minW: 4, minH: 5 },
];

const autopilotLayoutXxl: Layout[] = [
  { i: "autopilot", x: 0, y: 0, w: 12, h: 7, minW: 4, minH: 5 },
];

/**
 * All built-in presets
 */
export const builtInPresets: DashboardPreset[] = [
  {
    id: "pvp-battle",
    name: "PvP Lobby",
    icon: <PvPIcon className="size-5" />,
    description: "Optimized for competitive trading battles",
    isBuiltIn: true,
    widgets: pvpBattleWidgets,
    layouts: {
      xxl: pvpBattleLayoutXxl,
      xl: pvpBattleLayoutXl,
      lg: pvpBattleLayoutLg,
      md: pvpBattleLayoutMd,
      sm: pvpBattleLayoutSm,
    },
  },
  {
    id: "overview",
    name: "Overview",
    icon: <Home className="size-5" />,
    description: "Complete dashboard overview with all key widgets",
    isBuiltIn: true,
    widgets: overviewWidgets,
    layouts: {
      xxl: overviewLayoutXxl,
      xl: overviewLayoutXl,
      lg: overviewLayoutLg,
      md: overviewLayoutMd,
      sm: overviewLayoutSm,
    },
  },
  {
    id: "multi-chart",
    name: "Multi-Chart",
    icon: <ChartColumnBig className="size-5" />,
    description: "6 Live Charts for multi-token monitoring",
    isBuiltIn: true,
    widgets: multiChartWidgets,
    layouts: {
      xxl: multiChartLayoutXxl,
      xl: multiChartLayoutXl,
      lg: multiChartLayoutLg,
      md: multiChartLayoutMd,
      sm: multiChartLayoutSm,
    },
  },
  {
    id: "autopilot",
    name: "Autopilot",
    icon: <Bot className="size-5" />,
    description: "Automated token analysis with magic buy/exit signals",
    isBuiltIn: true,
    widgets: autopilotWidgets,
    layouts: {
      xxl: autopilotLayoutXxl,
      xl: autopilotLayoutXl,
      lg: autopilotLayoutLg,
      md: autopilotLayoutMd,
      sm: autopilotLayoutSm,
    },
  },
];

/**
 * Get a built-in preset by ID
 */
export const getBuiltInPreset = (id: string): DashboardPreset | undefined => {
  return builtInPresets.find(preset => preset.id === id);
};

/**
 * Check if a preset ID is a built-in preset
 */
export const isBuiltInPreset = (id: string): boolean => {
  return builtInPresets.some(preset => preset.id === id);
};

/**
 * Default preset ID (first built-in)
 */
export const DEFAULT_PRESET_ID = "overview";
