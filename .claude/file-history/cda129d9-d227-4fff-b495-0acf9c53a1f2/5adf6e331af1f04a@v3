# Changelog

All notable changes to TrenchBench API are documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.1.0/).

## [Unreleased]

### Added
- GCP infrastructure setup script (`scripts/gcp-setup.sh`)
- GCP setup documentation (`docs/GCP-SETUP.md`)

### Changed
- Repository renamed from `local-api` to `trenchbench-api`
- Updated documentation to reflect production-ready status

## [0.4.0] - 2026-01-13

### Added
- **CI/CD Pipeline**: GitHub Actions workflows for automated deployments
  - Beta deployment on push to `main` branch
  - Production deployment on `v*` tag push
- **Containerization**: Multi-stage Dockerfile for Cloud Run
  - Uses `oven/bun:1-slim` base image
  - Optimized for production with minimal image size
- **Environment Configuration**: APP_ENV-based environment detection
  - Supports `local`, `beta`, and `prod` environments
  - Environment-aware ClickHouse credential loading
  - Connection logging for debugging

### Changed
- Updated `env.example` with environment documentation and all three credential modes

## [0.3.0] - 2026-01-10

### Added
- Discovery trending endpoint (`GET /discovery/trending`)
- Network deployment guide for Tailscale Serve
- Comprehensive Tailscale configuration for macOS, Linux, and Windows

### Fixed
- Handle NaN when parsing limit query parameters
- Reorder market cap CASE clauses from highest to lowest for correct filtering

## [0.2.0] - 2026-01-08

### Added
- Labs endpoints always enabled (no environment flag needed)
- Batch holders stats endpoint (`POST /custom/holders-stats-batch`)
- Wallet trades snapshot endpoint (`POST /custom/wallet-trades-snapshot`)
- Extension system with registry endpoint (`GET /ext/registry`)
- Smoke page for browser-based API testing (`/smoke.html`)

### Changed
- Reorganized README for clarity
- Labs endpoints documented separately from generic endpoints

## [0.1.0] - 2026-01-01

### Added
- Initial release as local development tool
- ClickHouse Cloud Queries API integration
- Generic endpoints mirroring production API:
  - `GET /trades/:mint` - Trade history
  - `GET /search/:mint` - Token lookup
  - `GET /search` - Text-based token search
  - `GET /ohlcv/pool/:pool/:range` - Pool candlestick data
  - `GET /ohlcv/token/:mint/:range` - Token candlestick data
  - `GET /holders-stats/:mint` - Top holders
  - `GET /holder-stats/:mint/:address` - Single holder stats
  - `GET /traders-stats/:mint` - Top profitable traders
  - `GET /discovery/whale-moves` - Whale activity
  - `GET /wallet-tracker/*` - Wallet tracking endpoints
  - `GET /wallet-funding/:address` - Funding sources
  - `GET /multi-wallet-families/:mint` - Family detection
  - `GET /market-data/:mint` - Token market data
  - `GET /market-data-batch` - Batch market data
- Elysia HTTP framework with Bun runtime
- SQL injection prevention utilities
- Frontend integration via Vite proxy

---

[Unreleased]: https://github.com/BonkBotTeam/trenchbench-api/compare/v0.4.0...HEAD
[0.4.0]: https://github.com/BonkBotTeam/trenchbench-api/compare/v0.3.0...v0.4.0
[0.3.0]: https://github.com/BonkBotTeam/trenchbench-api/compare/v0.2.0...v0.3.0
[0.2.0]: https://github.com/BonkBotTeam/trenchbench-api/compare/v0.1.0...v0.2.0
[0.1.0]: https://github.com/BonkBotTeam/trenchbench-api/releases/tag/v0.1.0
