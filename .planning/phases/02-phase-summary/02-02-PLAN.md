---
phase: 02-phase-summary
plan: 02
type: execute
---

<objective>
Create the create-phase-summary.md workflow that generates PHASE-SUMMARY.md by aggregating plan summaries when a phase completes.

Purpose: Automate the generation of phase-level documentation at phase boundaries, called when `auto_advance.generate_phase_summary` is enabled.
Output: workflows/create-phase-summary.md workflow file ready for integration.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior plan in this phase:
@.planning/phases/02-phase-summary/02-01-SUMMARY.md

**Tech stack available:** None new (markdown workflows)
**Established patterns:**
- Workflow structure from execute-phase.md, transition.md
- Step-based process with clear names
- Config checks for gates/modes
- Frontmatter parsing from plan-phase.md

**Constraining decisions:**
- [Phase 1]: generate_phase_summary: true by default
- [Phase 1]: Called automatically at phase completion
- [Plan 02-01]: Phase summary aggregates, doesn't duplicate

**Key reference files:**
@~/.claude/get-shit-done/templates/phase-summary.md
@~/.claude/get-shit-done/workflows/transition.md
@~/.claude/get-shit-done/workflows/plan-phase.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create create-phase-summary.md workflow structure</name>
  <files>~/.claude/get-shit-done/workflows/create-phase-summary.md</files>
  <action>
Create the workflow file with standard GSD workflow structure:

1. **required_reading section:**
   - templates/phase-summary.md
   - Current phase's *-SUMMARY.md files
   - STATE.md

2. **purpose section:**
   - Generate PHASE-SUMMARY.md at phase completion
   - Aggregates plan summaries into single phase document
   - Called by advance-work.md (Phase 3) when generate_phase_summary is true

3. **process section with steps:**

   Step 1: check_config
   - Read config.json
   - Verify generate_phase_summary is true
   - If false, exit with message

   Step 2: identify_phase
   - Get current phase from STATE.md
   - Locate phase directory
   - List all *-SUMMARY.md files

   Step 3: read_plan_summaries
   - Read all plan summaries for the phase
   - Parse frontmatter for aggregation
   - Extract key fields: provides, affects, tech-stack, key-files, key-decisions, patterns, duration

   Step 4: aggregate_data
   - Union provides, affects, tech-stack.added
   - Union key-files (created and modified separately)
   - Concatenate key-decisions, patterns-established
   - Sum durations
   - Collect plan one-liners
   - Identify any issues created (ISS-XXX references)

   Step 5: generate_one_liner
   - Create phase-level substantive summary
   - Synthesize what the phase shipped (not "phase complete")
   - Must be different from individual plan one-liners

   Step 6: write_phase_summary
   - Create PHASE-SUMMARY.md using template
   - Fill in all aggregated data
   - Write to .planning/phases/XX-name/PHASE-SUMMARY.md

   Step 7: git_commit
   - Stage and commit the PHASE-SUMMARY.md
   - Message: "docs(XX): complete phase summary"

4. **success_criteria section:**
   - PHASE-SUMMARY.md created
   - All plan summaries aggregated
   - Committed to git
  </action>
  <verify>cat ~/.claude/get-shit-done/workflows/create-phase-summary.md shows complete workflow with all 7 steps</verify>
  <done>Workflow file exists with full structure, all steps defined, ready for use</done>
</task>

<task type="auto">
  <name>Task 2: Add integration hooks documentation</name>
  <files>~/.claude/get-shit-done/workflows/create-phase-summary.md</files>
  <action>
Add to the workflow file:

1. **invocation section:**
   - How this workflow is called (by advance-work.md)
   - Manual invocation option
   - When it runs (phase completion, generate_phase_summary: true)

2. **integration_points section:**
   - Entry point: Called by advance-work.md (Phase 3)
   - Reads: STATE.md, config.json, plan summaries
   - Writes: PHASE-SUMMARY.md
   - Commits: docs(XX): complete phase summary

3. **error_handling section:**
   - Missing plan summaries: Error with list of missing files
   - Config disabled: Exit silently (not an error)
   - Parse errors: Report which file failed

This documents how the workflow connects to the rest of GSD, preparing for Phase 3 integration.
  </action>
  <verify>grep -E "(invocation|integration_points|error_handling)" ~/.claude/get-shit-done/workflows/create-phase-summary.md shows all three sections present</verify>
  <done>Workflow has complete integration documentation, ready for advance-work.md to call</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] workflows/create-phase-summary.md exists
- [ ] Workflow has all 7 steps documented
- [ ] Workflow includes integration hooks documentation
- [ ] Workflow follows existing GSD workflow patterns
- [ ] Ready for integration with advance-work.md in Phase 3
</verification>

<success_criteria>

- create-phase-summary.md workflow complete
- All steps defined with clear actions
- Integration points documented for Phase 3
- Phase 2 complete and ready for Phase 3 (Advance Logic)
</success_criteria>

<output>
After completion, create `.planning/phases/02-phase-summary/02-02-SUMMARY.md`:

# Phase 2 Plan 2: Create Phase Summary Workflow Summary

**[Substantive one-liner describing workflow created]**

## Accomplishments
- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified
- `~/.claude/get-shit-done/workflows/create-phase-summary.md` - Description

## Decisions Made
[Key decisions and rationale]

## Next Step
Phase 2 complete, ready for Phase 3 (Advance Logic)
</output>
