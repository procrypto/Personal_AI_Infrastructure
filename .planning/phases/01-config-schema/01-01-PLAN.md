---
phase: 01-config-schema
plan: 01
type: execute
---

<objective>
Add auto_advance configuration section to config.json template.

Purpose: Enable configurable auto-advance behavior at the GSD system level, supporting both same-phase auto-advance and phase-transition prompts.
Output: Updated templates/config.json with auto_advance section and sensible defaults.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./01-01-SUMMARY.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Existing config structure:**
```json
{
  "mode": "interactive",
  "depth": "standard",
  "gates": { ... },
  "safety": { ... }
}
```

**Requirements from PROJECT.md:**
- Auto-advance to next plan when current plan completes (same phase)
- Prompt user at phase transitions (configurable)
- Backward compatibility with existing `mode: "yolo"` behavior

**Key insight:** The `execute_next_plan` gate already controls whether to auto-execute. The new `auto_advance` section adds granularity for:
- Same-phase behavior (always auto in yolo, ask in interactive)
- Phase-transition behavior (always ask unless explicitly overridden)
- Milestone-completion behavior (always ask - safety rail)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Design auto_advance schema</name>
  <files>None (design only)</files>
  <action>
Design the auto_advance configuration schema following these requirements:

**Schema structure:**
```json
"auto_advance": {
  "same_phase": true,      // Auto-advance to next plan within same phase
  "phase_transition": false, // Auto-advance to first plan of next phase
  "generate_phase_summary": true  // Generate PHASE-SUMMARY.md when phase completes
}
```

**Behavior matrix:**
| mode | same_phase | phase_transition | Result |
|------|------------|------------------|--------|
| yolo | true | true | Full auto (current yolo behavior) |
| yolo | true | false | Auto within phase, prompt at boundary (NEW DEFAULT) |
| interactive | false | false | Always prompt (current interactive) |
| interactive | true | false | Auto within phase only |

**Default values:**
- `same_phase`: true (eliminates friction within phases)
- `phase_transition`: false (preserves decision points)
- `generate_phase_summary`: true (automatic documentation)

This gives "smart defaults" - auto within phase, prompt between phases.
  </action>
  <verify>Schema documented above, ready for implementation</verify>
  <done>Schema designed with clear behavior matrix and defaults</done>
</task>

<task type="auto">
  <name>Task 2: Add auto_advance to templates/config.json</name>
  <files>~/.claude/get-shit-done/templates/config.json</files>
  <action>
Add auto_advance section to the config template after the `gates` section:

```json
{
  "mode": "interactive",
  "depth": "standard",
  "gates": {
    "confirm_project": true,
    "confirm_phases": true,
    "confirm_roadmap": true,
    "confirm_breakdown": true,
    "confirm_plan": true,
    "execute_next_plan": true,
    "issues_review": true,
    "confirm_transition": true
  },
  "auto_advance": {
    "same_phase": true,
    "phase_transition": false,
    "generate_phase_summary": true
  },
  "safety": {
    "always_confirm_destructive": true,
    "always_confirm_external_services": true
  }
}
```

**Note on gate interaction:**
- `execute_next_plan` gate is SEPARATE from auto_advance
- Gate controls whether to ask "execute now or later?"
- auto_advance controls whether to auto-start after that decision
- If gate=false AND same_phase=true: immediate auto-advance
- If gate=true AND same_phase=true: ask, then auto-advance if "yes"
  </action>
  <verify>cat ~/.claude/get-shit-done/templates/config.json | jq '.auto_advance' returns the new section</verify>
  <done>templates/config.json has auto_advance section with smart defaults</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `cat ~/.claude/get-shit-done/templates/config.json | jq .` validates as JSON
- [ ] auto_advance section exists with all three fields
- [ ] Default values match spec (same_phase: true, phase_transition: false, generate_phase_summary: true)
</verification>

<success_criteria>

- templates/config.json updated with auto_advance section
- Schema follows behavior matrix from design
- JSON remains valid
- Ready for Phase 2 (Phase Summary workflow) to use these settings
</success_criteria>

<output>
After completion, create `.planning/phases/01-config-schema/01-01-SUMMARY.md`:

# Phase 1 Plan 1: Config Schema Summary

**Added auto_advance configuration section to GSD config template**

## Accomplishments

- Designed auto_advance schema with three settings
- Added to templates/config.json with smart defaults
- Documented behavior matrix for mode Ã— settings combinations

## Files Created/Modified

- `~/.claude/get-shit-done/templates/config.json` - Added auto_advance section

## Decisions Made

- Default: same_phase=true (auto within phase)
- Default: phase_transition=false (prompt at boundaries)
- Default: generate_phase_summary=true (automatic docs)

## Issues Encountered

None

## Next Step

Phase 1 complete. Ready for Phase 2 (Phase Summary workflow).
</output>
