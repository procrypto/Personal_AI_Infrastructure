---
phase: 04-command-interface
plan: 01
type: execute
---

<objective>
Create /gsd:advance command for manual advancement triggering.

Purpose: Allow users to manually invoke the advance-work.md workflow when they want to trigger advancement logic outside of automatic flow (e.g., after manual plan completion or debugging).
Output: `~/.claude/commands/gsd/advance.md` command file
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior phase summaries (dependency graph):
@.planning/phases/03-advance-logic/03-01-SUMMARY.md
@.planning/phases/03-advance-logic/03-02-SUMMARY.md

# Key files to reference:
@~/.claude/get-shit-done/workflows/advance-work.md
@~/.claude/commands/gsd/progress.md

**Tech stack available:** None (internal workflow modification)
**Established patterns:** Command structure with YAML frontmatter, objective, process, success_criteria
**Constraining decisions:**
- advance-work.md is the single source of truth for advancement logic
- Manual invocation reads current position from STATE.md
- milestone_complete always prompts regardless of mode
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create advance.md command file</name>
  <files>~/.claude/commands/gsd/advance.md</files>
  <action>
Create a GSD command file following the established pattern from existing commands (progress.md, execute-plan.md). The command should:

**YAML frontmatter:**
- description: "Manually trigger advancement logic to determine next action after plan completion"
- allowed-tools: Read, Bash, Grep, Glob (same as progress.md)

**Objective section:**
- Manual invocation of advance-work.md workflow
- Useful after manual plan completion, debugging, or when auto-advance didn't trigger
- Reads current position from STATE.md

**Process section (4 steps):**
1. verify: Check .planning/ exists, STATE.md readable, at least one SUMMARY.md in current phase
2. load_context: Read STATE.md to determine current phase/plan position
3. invoke_workflow: Follow advance-work.md workflow steps (load_context, detect_scenario, route_by_scenario)
4. display_result: Show appropriate output based on scenario (same_phase, phase_complete, milestone_complete)

**Success criteria:**
- Current position determined from STATE.md
- Scenario correctly detected
- Appropriate action offered (execute next plan, transition phase, or complete milestone)

**Important:** This command IS the advance-work.md workflow executed manually. Copy the workflow's process steps into the command, not as a separate invocation. The command file should contain the actual logic, following the workflow's steps directly.
  </action>
  <verify>
File exists at ~/.claude/commands/gsd/advance.md
File has YAML frontmatter with description
File has <objective>, <process>, and <success_criteria> sections
Process steps align with advance-work.md workflow steps
  </verify>
  <done>
advance.md command file exists with:
- Valid YAML frontmatter
- Clear objective describing manual advancement
- Process steps matching advance-work.md workflow (load_context, detect_scenario, handle_* steps)
- Success criteria for scenario detection and action offering
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `~/.claude/commands/gsd/advance.md` exists
- [ ] YAML frontmatter parses correctly (description, allowed-tools)
- [ ] Process steps cover: verify, load_context, detect_scenario, handle scenarios
- [ ] Success criteria matches advance-work.md workflow success criteria
</verification>

<success_criteria>
- advance.md command file created
- Command follows established GSD command patterns
- Process steps implement advance-work.md workflow logic
- All verification checks pass
</success_criteria>

<output>
After completion, create `.planning/phases/04-command-interface/04-01-SUMMARY.md`:

# Phase 4 Plan 01: Create advance.md command Summary

**[Substantive one-liner about what shipped]**

## Accomplishments

- [Key outcome]

## Files Created/Modified

- `~/.claude/commands/gsd/advance.md` - Manual advancement command

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Phase complete, ready for Phase 5: Integration
</output>
